(window.webpackJsonp=window.webpackJsonp||[]).push([[43],{684:function(e,s,a){"use strict";a.r(s);var n=a(35),t=Object(n.a)({},(function(){var e=this,s=e.$createElement,a=e._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[a("h1",{attrs:{id:"archlinux-开启swap分区与休眠"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#archlinux-开启swap分区与休眠"}},[e._v("#")]),e._v(" ArchLinux 开启swap分区与休眠")]),e._v(" "),a("p",[e._v("参考：")]),e._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"https://www.cnblogs.com/WEREWOLFGHOST-Zedekiah/p/6347123.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("Archlinux Hibernating（休眠） - WEREWOLFGHOST - 博客园 (cnblogs.com)"),a("OutboundLink")],1)]),e._v(" "),a("li",[a("a",{attrs:{href:"https://wiki.archlinux.org/title/Swap_(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87)",target:"_blank",rel:"noopener noreferrer"}},[e._v("Swap (简体中文) - ArchWiki (archlinux.org)"),a("OutboundLink")],1)])]),e._v(" "),a("h2",{attrs:{id:"激活-swap"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#激活-swap"}},[e._v("#")]),e._v(" 激活 swap")]),e._v(" "),a("p",[e._v("首先需要有一个swap分区，可以使用 KDE Partition Manager 创建分区。")]),e._v(" "),a("p",[e._v("创建过程略。")]),e._v(" "),a("p",[e._v("查看是否有 Linux swap 分区："),a("code",[e._v("sudo fdisk -l")]),e._v("。示例输出如下结果：")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("...略...\nDevice             Start        End    Sectors   Size Type\n/dev/nvme0n1p1      2048     616447     614400   300M EFI System\n/dev/nvme0n1p2    616448     878591     262144   128M Microsoft reserved\n/dev/nvme0n1p3    878592  269316095  268437504   128G Linux filesystem\n/dev/nvme0n1p4 269316096  286095359   16779264     8G Linux swap\n...略...\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br"),a("span",{staticClass:"line-number"},[e._v("4")]),a("br"),a("span",{staticClass:"line-number"},[e._v("5")]),a("br"),a("span",{staticClass:"line-number"},[e._v("6")]),a("br"),a("span",{staticClass:"line-number"},[e._v("7")]),a("br")])]),a("p",[e._v("可以看到 "),a("code",[e._v("/dev/nvme0n1p4")]),e._v(" 是 swap 分区。")]),e._v(" "),a("p",[e._v("查看该分区的 UUID："),a("code",[e._v("sudo blkid")]),e._v("。输出如下：")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v('...略...\n/dev/nvme0n1p4: UUID="889cbc57-96b5-4e7d-8e27-549221dc9ace" TYPE="swap" PARTUUID="356879a9-5556-6240-8023-8b25dd2c2f41"\n...略...\n')])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br")])]),a("p",[e._v("编辑 "),a("code",[e._v("sudo vim /etc/fstab")]),e._v("，添加如下内容，其中的UUID是上述查询到的。")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("UUID=889cbc57-96b5-4e7d-8e27-549221dc9ace       none    swap    defaults        0       0\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br")])]),a("p",[e._v("重启即可激活swap。")]),e._v(" "),a("h2",{attrs:{id:"查看-swap-激活后的效果"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#查看-swap-激活后的效果"}},[e._v("#")]),e._v(" 查看 swap 激活后的效果")]),e._v(" "),a("p",[e._v("要检查交换空间的状态，使用 "),a("code",[e._v("swapon --show")])]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("NAME           TYPE      SIZE USED PRIO\n/dev/nvme0n1p4 partition   8G   0B   -2 \n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br")])]),a("p",[e._v("显示物理内存以及交换使用情况 "),a("code",[e._v("free -h")]),e._v("：")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("               total        used        free      shared  buff/cache   available\nMem:            30Gi       2.4Gi        25Gi       475Mi       3.5Gi        27Gi\nSwap:          8.0Gi          0B       8.0Gi\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br")])]),a("h2",{attrs:{id:"启用休眠"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#启用休眠"}},[e._v("#")]),e._v(" 启用休眠")]),e._v(" "),a("ol",[a("li",[a("strong",[e._v("配置 grub")])])]),e._v(" "),a("p",[e._v("编辑 grub 配置，添加启动参数 "),a("code",[e._v("sudo vim /etc/default/grub")]),e._v("：")]),e._v(" "),a("p",[e._v("添加 "),a("code",[e._v("resume=UUID=")]),e._v("，从交换分区恢复休眠")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v('...略...\nGRUB_CMDLINE_LINUX_DEFAULT="resume=UUID=889cbc57-96b5-4e7d-8e27-549221dc9ace apparmor=1 security=apparmor udev.log_priority=3"\n...略...\n')])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br")])]),a("p",[e._v("更新 grub.cfg 配置文件："),a("code",[e._v("sudo grub-mkconfig -o /boot/grub/grub.cfg")])]),e._v(" "),a("ol",{attrs:{start:"2"}},[a("li",[a("strong",[e._v("配置 initramfs")])])]),e._v(" "),a("p",[e._v("编辑文件 "),a("code",[e._v("sudo vim /etc/mkinitcpio.conf")])]),e._v(" "),a("p",[e._v("按 "),a("code",[e._v("shift-g")]),e._v(" 跳转到文件底部，修改 "),a("code",[e._v("HOOKS=")]),e._v(" 的内容，在 "),a("code",[e._v("filesystems")]),e._v(" 之前添加 "),a("code",[e._v("resume")])]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v('...略...\nHOOKS="base udev resume autodetect modconf block keyboard keymap filesystems fsck"\n...略...\n')])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br")])]),a("p",[e._v("重新生成"),a("a",{attrs:{href:"https://wiki.archlinux.org/title/Mkinitcpio_(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87)",target:"_blank",rel:"noopener noreferrer"}},[e._v("initramfs"),a("OutboundLink")],1),e._v("："),a("code",[e._v("mkinitcpio -p linux")])]),e._v(" "),a("p",[e._v("重启，即可拥有休眠功能。")])])}),[],!1,null,null,null);s.default=t.exports}}]);