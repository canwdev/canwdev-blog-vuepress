(window.webpackJsonp=window.webpackJsonp||[]).push([[65],{642:function(t,n,s){"use strict";s.r(n);var a=s(56),e=Object(a.a)({},(function(){var t=this,n=t.$createElement,s=t._self._c||n;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"mongodb-的安装与配置"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#mongodb-的安装与配置"}},[t._v("#")]),t._v(" Mongodb 的安装与配置")]),t._v(" "),s("h2",{attrs:{id:"ubuntu-安装-mongodb"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ubuntu-安装-mongodb"}},[t._v("#")]),t._v(" Ubuntu 安装 Mongodb")]),t._v(" "),s("ul",[s("li",[t._v("请参阅"),s("a",{attrs:{href:"https://docs.mongodb.com/manual/tutorial/install-mongodb-on-ubuntu/",target:"_blank",rel:"noopener noreferrer"}},[t._v("官方教程"),s("OutboundLink")],1)])]),t._v(" "),s("h2",{attrs:{id:"windows-下安装-mongodb"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#windows-下安装-mongodb"}},[t._v("#")]),t._v(" Windows 下安装 Mongodb")]),t._v(" "),s("ol",[s("li",[s("p",[t._v("下载")]),t._v(" "),s("p",[s("a",{attrs:{href:"https://www.mongodb.com/download-center/community",target:"_blank",rel:"noopener noreferrer"}},[t._v("下载 mongodb"),s("OutboundLink")],1),t._v("，解压到指定位置")])]),t._v(" "),s("li",[s("p",[t._v("直接运行")]),t._v(" "),s("p",[t._v("命令行运行mongodb服务器："),s("code",[t._v("C:\\mongodb\\bin\\mongod --dbpath c:\\data\\db")])])]),t._v(" "),s("li",[s("p",[t._v("连接数据库")]),t._v(" "),s("p",[t._v("连接mongodb，可直接运行"),s("code",[t._v("mongo.exe")]),t._v("，也可使用 "),s("a",{attrs:{href:"https://www.mongodb.com/download-center/compass",target:"_blank",rel:"noopener noreferrer"}},[t._v("MongoDB Compass"),s("OutboundLink")],1),t._v(" 或 "),s("a",{attrs:{href:"https://www.mongodbmanager.com/",target:"_blank",rel:"noopener noreferrer"}},[t._v("NoSQL Manager for MongoDB"),s("OutboundLink")],1),t._v(" 作为GUI客户端。新安装的 Mongodb 是没有密码的，可以在本地网络直连。")])])]),t._v(" "),s("h3",{attrs:{id:"windows-使用-nssm-安装-mongodb-为系统服务"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#windows-使用-nssm-安装-mongodb-为系统服务"}},[t._v("#")]),t._v(" Windows 使用 nssm 安装 mongodb 为系统服务")]),t._v(" "),s("p",[t._v("使用nssm安装mongodb为系统服务，并开机启动：")]),t._v(" "),s("ol",[s("li",[t._v("下载 "),s("code",[t._v("nssm.exe")]),t._v(" 并放到 "),s("code",[t._v("C:\\Windows\\")]),t._v(" 下，"),s("code",[t._v("Ctrl+R")]),t._v(" 运行 "),s("code",[t._v("nssm install")]),t._v(" 命令，会弹出一个图形配置窗口。")]),t._v(" "),s("li",[t._v("在Application选项卡下，Path设为 "),s("code",[t._v("mongod.exe")]),t._v(" 的启动路径如 "),s("code",[t._v("D:\\Server\\mongodb_server\\mongod.exe")]),t._v("；Startup Directory 会自动设置为相同目录 "),s("code",[t._v("D:\\Server\\mongodb_server")]),t._v("；Arguments 可设为 "),s("code",[t._v("--dbpath D:\\Server\\mongodb_db")]),t._v("；然后Service Name填一下服务名称 "),s("code",[t._v("mongod")]),t._v("；点 Install Service 即可完成安装。")]),t._v(" "),s("li",[t._v("运行 "),s("code",[t._v("services.msc")]),t._v(" 打开服务管理器，找到服务名 "),s("code",[t._v("mongod")]),t._v("，设为自动启动，然后点击启动即可。")])]),t._v(" "),s("hr"),t._v(" "),s("h2",{attrs:{id:"设置并连接到远程mongodb数据库"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#设置并连接到远程mongodb数据库"}},[t._v("#")]),t._v(" 设置并连接到远程MongoDB数据库")]),t._v(" "),s("blockquote",[s("p",[t._v("参考："),s("a",{attrs:{href:"https://medium.com/founding-ithaka/setting-up-and-connecting-to-a-remote-mongodb-database-5df754a4da89",target:"_blank",rel:"noopener noreferrer"}},[t._v("Setting up and connecting to a remote MongoDB database"),s("OutboundLink")],1)])]),t._v(" "),s("ol",[s("li",[s("p",[t._v("在服务端打开mongo shell")]),t._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[t._v("$ mongo\n")])])])]),t._v(" "),s("li",[s("p",[t._v("在mongo shell内访问admin数据库。创建一个新的管理员用户。")]),t._v(" "),s("blockquote",[s("p",[t._v("在mongo shell内访问admin数据库。创建一个新的管理员用户。 您可以一次将多个角色分配给单个用户。这些角色向管理员用户授予创建用户，修改用户，读取和写入任何数据库所需的所有特权。")])]),t._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" use admin"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" db.createUser"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      user: "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"admin"')]),t._v(",\n      pwd: "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"myadminpassword"')]),t._v(",\n      roles: "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" role: "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"userAdminAnyDatabase"')]),t._v(", db: "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"admin"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(",\n                "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" role: "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"readWriteAnyDatabase"')]),t._v(", db: "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"admin"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(",\n                "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" role: "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"dbAdminAnyDatabase"')]),t._v(",   db: "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"admin"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n             "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("blockquote",[s("p",[t._v("现在创建数据库普通用户，并授予他们在各自数据库中的角色。如果您的系统由多个数据库组成，则每个数据库都有一个单独的用户是一个好主意。")])]),t._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" db.createUser"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      user: "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"user1"')]),t._v(",\n      pwd: "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"user1password"')]),t._v(",\n      roles: "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" role: "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"userAdmin"')]),t._v(", db: "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"sampledb"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(",\n                "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" role: "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"dbAdmin"')]),t._v(",   db: "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"sampledb"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(",\n                "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" role: "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"readWrite"')]),t._v(", db: "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"sampledb"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n             "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])])]),t._v(" "),s("li",[s("p",[t._v("启用MongoDB身份验证")]),t._v(" "),s("blockquote",[s("p",[t._v("编辑配置文件 /etc/mongod.conf，参照以下内容修改：")])]),t._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# sudo vi /etc/mongod.conf")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# network interfaces")]),t._v("\nnet:\n  port: "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("27017")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#  bindIp: 127.0.0.1")]),t._v("\n  bindIp: "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0.0")]),t._v(".0.0\n\nsecurity:\n  authorization: "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'enabled'")]),t._v("\n")])])]),s("blockquote",[s("p",[t._v("重启 mongod 服务")])]),t._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[t._v("$ "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("service")]),t._v(" mongod restart\n")])])])]),t._v(" "),s("li",[s("p",[t._v("开放 27017 端口")]),t._v(" "),s("blockquote",[s("p",[t._v("在你的防火墙设置端口开放")])])]),t._v(" "),s("li",[s("p",[t._v("测试远程连接")]),t._v(" "),s("ol",[s("li",[t._v("使用 "),s("a",{attrs:{href:"https://www.mongodb.com/download-center/compass",target:"_blank",rel:"noopener noreferrer"}},[t._v("MongoDB Compass"),s("OutboundLink")],1),t._v(" 连接远程服务器")]),t._v(" "),s("li",[t._v("或者在终端执行命令："),s("code",[t._v("$ mongo -u admin -p myadminpassword 127.0.0.1/admin")])])])])])])}),[],!1,null,null,null);n.default=e.exports}}]);