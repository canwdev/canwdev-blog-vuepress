(window.webpackJsonp=window.webpackJsonp||[]).push([[63],{603:function(t,e,a){"use strict";a.r(e);var r=a(57),s=Object(r.a)({},(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"termux-配置笔记"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#termux-配置笔记"}},[t._v("#")]),t._v(" Termux 配置笔记")]),t._v(" "),a("h2",{attrs:{id:"参考资料"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#参考资料"}},[t._v("#")]),t._v(" 参考资料")]),t._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"https://www.sqlsec.com/2018/05/termux.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("Termux 高级终端安装使用配置教程"),a("OutboundLink")],1)]),t._v(" "),a("li",[a("a",{attrs:{href:"https://tonybai.com/2017/11/09/hello-termux/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Hello，Termux"),a("OutboundLink")],1)])]),t._v(" "),a("h2",{attrs:{id:"安装"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#安装"}},[t._v("#")]),t._v(" 安装")]),t._v(" "),a("p",[t._v("建议到 "),a("a",{attrs:{href:"https://f-droid.org/zh_Hans/packages/com.termux/",target:"_blank",rel:"noopener noreferrer"}},[t._v("F-Droid"),a("OutboundLink")],1),t._v(" 下载 "),a("a",{attrs:{href:"https://f-droid.org/repo/com.termux_96.apk",target:"_blank",rel:"noopener noreferrer"}},[a("strong",[t._v("0.96")]),a("OutboundLink")],1),t._v(" 或后续的版本，这些版本自带了系统文件，无需联网安装。也可以到「酷安」寻找相应到资源。")]),t._v(" "),a("p",[t._v("如果实在无法联网安装，参考这篇方案："),a("a",{attrs:{href:"https://android.stackexchange.com/a/201855",target:"_blank",rel:"noopener noreferrer"}},[t._v("Termux was unable to install the bootstrap packages"),a("OutboundLink")],1)]),t._v(" "),a("h2",{attrs:{id:"常用路径"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#常用路径"}},[t._v("#")]),t._v(" 常用路径")]),t._v(" "),a("ul",[a("li",[t._v("$HOME "),a("code",[t._v("/data/data/com.termux/files/home")])]),t._v(" "),a("li",[t._v("$PREFIX "),a("code",[t._v("/data/data/com.termux/files/usr")])])]),t._v(" "),a("h2",{attrs:{id:"更换国内镜像"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#更换国内镜像"}},[t._v("#")]),t._v(" 更换国内镜像")]),t._v(" "),a("p",[a("a",{attrs:{href:"https://mirror.tuna.tsinghua.edu.cn/help/termux/",target:"_blank",rel:"noopener noreferrer"}},[t._v("清华TUNA镜像的说明"),a("OutboundLink")],1)]),t._v(" "),a("p",[t._v("编辑 "),a("code",[t._v("/data/data/com.termux/files/usr/etc/apt/sources.list")]),t._v("文件，填入以下内容：")]),t._v(" "),a("blockquote",[a("p",[t._v("如果没有 vi 等编辑器，可以使用 "),a("code",[t._v("echo 'deb http://mirrors.tuna.tsinghua.edu.cn/termux stable main' > sources.list")]),t._v(" 的方式来更新文件")])]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("# The main termux repository:\n# deb http://termux.net stable main\ndeb http://mirrors.tuna.tsinghua.edu.cn/termux stable main\n")])])]),a("p",[t._v("最后 "),a("code",[t._v("pkg update")])]),t._v(" "),a("h2",{attrs:{id:"termux-安装-on-my-zsh"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#termux-安装-on-my-zsh"}},[t._v("#")]),t._v(" Termux 安装 on-my-zsh")]),t._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("apt")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("zsh")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("apt")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" clone --depth"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" git://github.com/robbyrussell/oh-my-zsh.git ~/.oh-my-zsh\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("cp")]),t._v(" ~/.oh-my-zsh/templates/zshrc.zsh-template ~/.zshrc\nchsh "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("zsh")]),t._v("\n")])])]),a("h2",{attrs:{id:"termux-设置-sshd"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#termux-设置-sshd"}},[t._v("#")]),t._v(" Termux 设置 sshd")]),t._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"https://www.jianshu.com/p/2e6c8152a2ba",target:"_blank",rel:"noopener noreferrer"}},[t._v("电脑通过ssh连接android手机上的termux"),a("OutboundLink")],1)])]),t._v(" "),a("ol",[a("li",[t._v("Termux 上安装openssh："),a("code",[t._v("apt install openssh")]),t._v("，启动服务："),a("code",[t._v("sshd")])]),t._v(" "),a("li",[t._v("在终端上生成key：运行 "),a("code",[t._v("ssh-keygen -t rsa")]),t._v(" 交互式地生成一个key，默认保存在~/.ssh/下，两个文件id_rsa和id_rsa.pub，pub是公钥，另一个是私钥。")]),t._v(" "),a("li",[t._v("发送id_rsa：通过各种方式将id_rsa发送到Termux 上 "),a("code",[t._v("/data/data/com.termux/files/home/.ssh/id_rsa.pub")])]),t._v(" "),a("li",[t._v("Termux 上设置授权key："),a("code",[t._v("cat ./id_rsa.pub >> authorized_keys")])]),t._v(" "),a("li",[t._v("Termux 上查看termux用户名："),a("code",[t._v("whoami")]),t._v(" // 如果不需要秘钥登录，可直接使用密码登录，通过 "),a("code",[t._v("passwd")]),t._v(" 设置密码")]),t._v(" "),a("li",[t._v("查看Termux IP地址："),a("code",[t._v("ifconfig")])]),t._v(" "),a("li",[t._v("终端连接Termux ："),a("code",[t._v("ssh u0_a170@192.168.2.108 -p 8022")])])]),t._v(" "),a("h2",{attrs:{id:"备份与恢复"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#备份与恢复"}},[t._v("#")]),t._v(" 备份与恢复")]),t._v(" "),a("p",[t._v("参考"),a("a",{attrs:{href:"https://wiki.termux.com/wiki/Backing_up_Termux",target:"_blank",rel:"noopener noreferrer"}},[t._v("官方备份教程"),a("OutboundLink")],1),t._v("，通过备份termux的data数据，可以实现备份、恢复、或迁移到其他设备（仅限相同架构），我写了一份 "),a("a",{attrs:{href:"./setup-termux/termux_backup.sh"}},[t._v("备份恢复脚本")])]),t._v(" "),a("h3",{attrs:{id:"备份"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#备份"}},[t._v("#")]),t._v(" 备份")]),t._v(" "),a("ol",[a("li",[t._v("设置termux允许访问存储空间 "),a("code",[t._v("termux-setup-storage")])]),t._v(" "),a("li",[t._v("切换到termux根目录 "),a("code",[t._v("cd /data/data/com.termux/files")])]),t._v(" "),a("li",[t._v("备份数据："),a("code",[t._v("tar -czvf /sdcard/termux-backup.tar.gz home usr")])])]),t._v(" "),a("h3",{attrs:{id:"恢复"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#恢复"}},[t._v("#")]),t._v(" 恢复")]),t._v(" "),a("ol",[a("li",[t._v("切换到termux根目录 "),a("code",[t._v("cd /data/data/com.termux/files")])]),t._v(" "),a("li",[t._v("替换home目录"),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("rm")]),t._v(" -rf home\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("tar")]),t._v(" -zxvf /sdcard/termux-backup.tar.gz home\n")])])])]),t._v(" "),a("li",[t._v("复制 busybox 二进制文件到指定位置（重要） "),a("code",[t._v("cp ./usr/bin/busybox ./tar")])]),t._v(" "),a("li",[t._v("抹掉 sysroot，所有包将被删除 "),a("code",[t._v("rm -rf usr")])]),t._v(" "),a("li",[t._v("从备份文件恢复 sysroot"),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("unset")]),t._v(" LD_PRELOAD\n./tar -zxvf /sdcard/termux-backup.tar.gz usr\n")])])])]),t._v(" "),a("li",[t._v("使用通知中心的 exit 按钮退出 Termux 然后重开即可恢复完成")])])])}),[],!1,null,null,null);e.default=s.exports}}]);