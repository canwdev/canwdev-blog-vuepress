(window.webpackJsonp=window.webpackJsonp||[]).push([[60],{654:function(s,n,t){"use strict";t.r(n);var a=t(27),e=Object(a.a)({},(function(){var s=this,n=s.$createElement,t=s._self._c||n;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h1",{attrs:{id:"mongodb-的安装与配置"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#mongodb-的安装与配置"}},[s._v("#")]),s._v(" Mongodb 的安装与配置")]),s._v(" "),t("h2",{attrs:{id:"ubuntu-安装-mongodb"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#ubuntu-安装-mongodb"}},[s._v("#")]),s._v(" Ubuntu 安装 Mongodb")]),s._v(" "),t("ul",[t("li",[s._v("请参阅"),t("a",{attrs:{href:"https://docs.mongodb.com/manual/tutorial/install-mongodb-on-ubuntu/",target:"_blank",rel:"noopener noreferrer"}},[s._v("官方教程"),t("OutboundLink")],1)])]),s._v(" "),t("h2",{attrs:{id:"windows-下安装-mongodb"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#windows-下安装-mongodb"}},[s._v("#")]),s._v(" Windows 下安装 Mongodb")]),s._v(" "),t("ol",[t("li",[t("p",[s._v("下载")]),s._v(" "),t("p",[t("a",{attrs:{href:"https://www.mongodb.com/download-center/community",target:"_blank",rel:"noopener noreferrer"}},[s._v("下载 mongodb"),t("OutboundLink")],1),s._v("，解压到指定位置")])]),s._v(" "),t("li",[t("p",[s._v("直接运行")]),s._v(" "),t("p",[s._v("命令行运行mongodb服务器："),t("code",[s._v("C:\\mongodb\\bin\\mongod --dbpath c:\\data\\db")])])]),s._v(" "),t("li",[t("p",[s._v("连接数据库")]),s._v(" "),t("p",[s._v("连接mongodb，可直接运行"),t("code",[s._v("mongo.exe")]),s._v("，也可使用 "),t("a",{attrs:{href:"https://www.mongodb.com/download-center/compass",target:"_blank",rel:"noopener noreferrer"}},[s._v("MongoDB Compass"),t("OutboundLink")],1),s._v(" 或 "),t("a",{attrs:{href:"https://www.mongodbmanager.com/",target:"_blank",rel:"noopener noreferrer"}},[s._v("NoSQL Manager for MongoDB"),t("OutboundLink")],1),s._v(" 作为GUI客户端。新安装的 Mongodb 是没有密码的，可以在本地网络直连。")])])]),s._v(" "),t("h3",{attrs:{id:"windows-使用-nssm-安装-mongodb-为系统服务"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#windows-使用-nssm-安装-mongodb-为系统服务"}},[s._v("#")]),s._v(" Windows 使用 nssm 安装 mongodb 为系统服务")]),s._v(" "),t("p",[s._v("使用nssm安装mongodb为系统服务，并开机启动：")]),s._v(" "),t("ol",[t("li",[s._v("下载 "),t("code",[s._v("nssm.exe")]),s._v(" 并放到 "),t("code",[s._v("C:\\Windows\\")]),s._v(" 下，"),t("code",[s._v("Ctrl+R")]),s._v(" 运行 "),t("code",[s._v("nssm install")]),s._v(" 命令，会弹出一个图形配置窗口。")]),s._v(" "),t("li",[s._v("在Application选项卡下，Path设为 "),t("code",[s._v("mongod.exe")]),s._v(" 的启动路径如 "),t("code",[s._v("D:\\Server\\mongodb_server\\mongod.exe")]),s._v("；Startup Directory 会自动设置为相同目录 "),t("code",[s._v("D:\\Server\\mongodb_server")]),s._v("；Arguments 可设为 "),t("code",[s._v("--dbpath D:\\Server\\mongodb_db")]),s._v("；然后Service Name填一下服务名称 "),t("code",[s._v("mongod")]),s._v("；点 Install Service 即可完成安装。")]),s._v(" "),t("li",[s._v("运行 "),t("code",[s._v("services.msc")]),s._v(" 打开服务管理器，找到服务名 "),t("code",[s._v("mongod")]),s._v("，设为自动启动，然后点击启动即可。")])]),s._v(" "),t("hr"),s._v(" "),t("h2",{attrs:{id:"设置并连接到远程mongodb数据库"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#设置并连接到远程mongodb数据库"}},[s._v("#")]),s._v(" 设置并连接到远程MongoDB数据库")]),s._v(" "),t("blockquote",[t("p",[s._v("参考："),t("a",{attrs:{href:"https://medium.com/founding-ithaka/setting-up-and-connecting-to-a-remote-mongodb-database-5df754a4da89",target:"_blank",rel:"noopener noreferrer"}},[s._v("Setting up and connecting to a remote MongoDB database"),t("OutboundLink")],1)])]),s._v(" "),t("ol",[t("li",[t("p",[s._v("在服务端打开mongo shell")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[s._v("$ mongo\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])])]),s._v(" "),t("li",[t("p",[s._v("在mongo shell内访问admin数据库。创建一个新的管理员用户。")]),s._v(" "),t("blockquote",[t("p",[s._v("在mongo shell内访问admin数据库。创建一个新的管理员用户。 您可以一次将多个角色分配给单个用户。这些角色向管理员用户授予创建用户，修改用户，读取和写入任何数据库所需的所有特权。")])]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" use admin"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" db.createUser"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n      user: "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"admin"')]),s._v(",\n      pwd: "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"myadminpassword"')]),s._v(",\n      roles: "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n                "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" role: "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"userAdminAnyDatabase"')]),s._v(", db: "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"admin"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(",\n                "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" role: "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"readWriteAnyDatabase"')]),s._v(", db: "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"admin"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(",\n                "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" role: "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"dbAdminAnyDatabase"')]),s._v(",   db: "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"admin"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n             "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br")])]),t("blockquote",[t("p",[s._v("现在创建数据库普通用户，并授予他们在各自数据库中的角色。如果您的系统由多个数据库组成，则每个数据库都有一个单独的用户是一个好主意。")])]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" db.createUser"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n      user: "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"user1"')]),s._v(",\n      pwd: "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"user1password"')]),s._v(",\n      roles: "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n                "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" role: "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"userAdmin"')]),s._v(", db: "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"sampledb"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(",\n                "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" role: "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"dbAdmin"')]),s._v(",   db: "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"sampledb"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(",\n                "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" role: "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"readWrite"')]),s._v(", db: "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"sampledb"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n             "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br")])])]),s._v(" "),t("li",[t("p",[s._v("启用MongoDB身份验证")]),s._v(" "),t("blockquote",[t("p",[s._v("编辑配置文件 /etc/mongod.conf，参照以下内容修改：")])]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# sudo vi /etc/mongod.conf")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# network interfaces")]),s._v("\nnet:\n  port: "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("27017")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#  bindIp: 127.0.0.1")]),s._v("\n  bindIp: "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v(".0.0\n\nsecurity:\n  authorization: "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'enabled'")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br")])]),t("blockquote",[t("p",[s._v("重启 mongod 服务")])]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("service")]),s._v(" mongod restart\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])])]),s._v(" "),t("li",[t("p",[s._v("开放 27017 端口")]),s._v(" "),t("blockquote",[t("p",[s._v("在你的防火墙设置端口开放")])])]),s._v(" "),t("li",[t("p",[s._v("测试远程连接")]),s._v(" "),t("ol",[t("li",[s._v("使用 "),t("a",{attrs:{href:"https://www.mongodb.com/download-center/compass",target:"_blank",rel:"noopener noreferrer"}},[s._v("MongoDB Compass"),t("OutboundLink")],1),s._v(" 连接远程服务器")]),s._v(" "),t("li",[s._v("或者在终端执行命令："),t("code",[s._v("$ mongo -u admin -p myadminpassword 127.0.0.1/admin")])])])])])])}),[],!1,null,null,null);n.default=e.exports}}]);