(window.webpackJsonp=window.webpackJsonp||[]).push([[24],{459:function(a,e,s){a.exports=s.p+"assets/img/image-20200829225253396.047feb22.png"},460:function(a,e,s){a.exports=s.p+"assets/img/image-20200829225438421.904eae10.png"},602:function(a,e,s){"use strict";s.r(e);var t=s(57),r=Object(t.a)({},(function(){var a=this,e=a.$createElement,t=a._self._c||e;return t("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[t("h1",{attrs:{id:"linux-for-surface-pro-7-指南"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#linux-for-surface-pro-7-指南"}},[a._v("#")]),a._v(" Linux for Surface Pro 7 指南")]),a._v(" "),t("p",[a._v("如果你网络状况良好，直接参考 "),t("code",[a._v("linux-surface")]),a._v(" 的"),t("a",{attrs:{href:"https://github.com/linux-surface/linux-surface/wiki/Installation-and-Setup",target:"_blank",rel:"noopener noreferrer"}},[a._v("官方文档"),t("OutboundLink")],1),a._v("安装就可以了。下面介绍如何手动下载包并在离线的情况下安装。")]),a._v(" "),t("h2",{attrs:{id:"_1-debian-ubuntu"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-debian-ubuntu"}},[a._v("#")]),a._v(" 1. Debian/Ubuntu")]),a._v(" "),t("p",[t("img",{attrs:{src:s(459),alt:"image-20200829225253396"}})]),a._v(" "),t("h3",{attrs:{id:"_1-1-下载"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-1-下载"}},[a._v("#")]),a._v(" 1.1 下载")]),a._v(" "),t("p",[a._v("可以直接到 Github 的 release 页面下载内核，或者到 https://pkg.surfacelinux.com/debian 手动获取 "),t("code",[a._v("deb")]),a._v(" 包：")]),a._v(" "),t("p",[a._v("下载 "),t("a",{attrs:{href:"https://pkg.surfacelinux.com/debian/dists/release/main/binary-amd64/Packages",target:"_blank",rel:"noopener noreferrer"}},[a._v("Packages"),t("OutboundLink")],1),a._v(" 文件，用文本编辑器打开，搜索包名。")]),a._v(" "),t("p",[a._v("例如搜索："),t("code",[a._v("linux-headers-surface")]),a._v("，可以在下方得到这么一串地址：")]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("Filename: pool/main/l/linux-surface/linux-headers-surface_5.8.5-surface-1_amd64.deb\n")])])]),t("p",[a._v("直接和上面的地址进行拼接，得到下载地址："),t("code",[a._v("https://pkg.surfacelinux.com/debian/pool/main/l/linux-surface/linux-headers-surface_5.8.5-surface-1_amd64.deb")])]),a._v(" "),t("p",[a._v("全部需要下载的包有：")]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("linux-headers-surface linux-image-surface surface-ipts-firmware libwacom-surface iptsd\n")])])]),t("h3",{attrs:{id:"_1-2-安装"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-2-安装"}},[a._v("#")]),a._v(" 1.2 安装")]),a._v(" "),t("p",[a._v("使用 "),t("code",[a._v("sudo dpkg -i 本地安装包.deb")]),a._v(" 来安装，顺序如下：")]),a._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 内核")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("sudo")]),a._v(" dpkg -i linux-headers-5.8.5-surface_5.8.5-surface-1_amd64.deb "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n\tlinux-headers-surface_5.8.5-surface-1_amd64.deb "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n\tlinux-image-5.8.5-surface_5.8.5-surface-1_amd64.deb "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n\tlinux-image-surface_5.8.5-surface-1_amd64.deb\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 驱动程序")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("sudo")]),a._v(" dpkg --auto-deconfigure -i libwacom-surface_1.4.1-2_amd64.deb\n"),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("sudo")]),a._v(" dpkg -i surface-ipts-firmware_20200402-1_amd64.deb\n"),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("sudo")]),a._v(" dpkg -i iptsd_0.1-1_amd64.deb\n")])])]),t("h2",{attrs:{id:"_2-arch-manjaro"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-arch-manjaro"}},[a._v("#")]),a._v(" 2. Arch/Manjaro")]),a._v(" "),t("p",[t("img",{attrs:{src:s(460),alt:"image-20200829225438421"}})]),a._v(" "),t("h3",{attrs:{id:"_2-1-下载"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-下载"}},[a._v("#")]),a._v(" 2.1 下载")]),a._v(" "),t("p",[a._v("在 "),t("a",{attrs:{href:"https://pkg.surfacelinux.com/arch/",target:"_blank",rel:"noopener noreferrer"}},[a._v("这里"),t("OutboundLink")],1),a._v(" 可以直接下载 "),t("code",[a._v("zst")]),a._v(" 文件，下载前需去除 "),t("code",[a._v(".blob")]),a._v(" 后缀，如："),t("code",[a._v("https://pkg.surfacelinux.com/arch/iptsd-0.1-1-x86_64.pkg.tar.zst")])]),a._v(" "),t("p",[a._v("需要下载这些包：")]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("linux-surface-headers linux-surface surface-ipts-firmware iptsd\n")])])]),t("h3",{attrs:{id:"_2-2-安装"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-安装"}},[a._v("#")]),a._v(" 2.2 安装")]),a._v(" "),t("p",[a._v("如果直接安装，可能会提示签名错误，此时需要修改配置："),t("code",[a._v("/etc/pacman.conf")])]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("# SigLevel = Required DatabaseOptional\nSigLevel = Never\n# LocalFileSigLevel = Optional\nLocalFileSigLevel = Never\n")])])]),t("p",[a._v("然后就可以直接安装了：")]),a._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 内核")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("sudo")]),a._v(" pacman -U linux-surface-5.8.5.arch1-1-x86_64.pkg.tar.zst "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n\tlinux-surface-headers-5.8.5.arch1-1-x86_64.pkg.tar.zst\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 驱动程序")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("sudo")]),a._v(" pacman -U surface-ipts-firmware-20200402-1-any.pkg.tar.zst "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n\tiptsd-0.1-1-x86_64.pkg.tar.zst\n\t\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 额外的软件，来自 AUR，如果你装了 yay")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 可能需要开启代理才能下载成功")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("export")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("ALL_PROXY")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("socks5://proxyAddress:port\nyay -S libwacom-surface surface-dtx-daemon surface-control\n")])])]),t("h2",{attrs:{id:"_3-常见问题"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-常见问题"}},[a._v("#")]),a._v(" 3. 常见问题")]),a._v(" "),t("h3",{attrs:{id:"_3-1-vmlinuz-has-invalid-signature"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-1-vmlinuz-has-invalid-signature"}},[a._v("#")]),a._v(" 3.1 vmlinuz has invalid signature")]),a._v(" "),t("p",[a._v("重启后可能提示 "),t("code",[a._v("vmlinuz has invalid signature")]),a._v("，此时请进入 UEFI 关闭安全启动，或者安装 "),t("code",[a._v("linux-surface-secureboot-mok")]),a._v("。")]),a._v(" "),t("h3",{attrs:{id:"_3-2-没有触控"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-2-没有触控"}},[a._v("#")]),a._v(" 3.2 没有触控")]),a._v(" "),t("p",[a._v("在内核 5.8 及更高版本中，你还需要安装 iptsd 以获得触摸支持并启用 iptsd 守护程序 "),t("code",[a._v("sudo systemctl enable iptsd.service")])]),a._v(" "),t("h3",{attrs:{id:"_3-3-sp7-重启后卡田-logo"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-3-sp7-重启后卡田-logo"}},[a._v("#")]),a._v(" 3.3 "),t("a",{attrs:{href:"https://github.com/linux-surface/linux-surface/wiki/Surface-Pro-7",target:"_blank",rel:"noopener noreferrer"}},[a._v("SP7"),t("OutboundLink")],1),a._v(" 重启后卡田 Logo")]),a._v(" "),t("ol",[t("li",[t("code",[a._v("sudo vim /etc/default/grub")])]),a._v(" "),t("li",[a._v("Add "),t("code",[a._v("reboot=pci")]),a._v(" to your kernel boot parameters，如："),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v('GRUB_CMDLINE_LINUX_DEFAULT="quiet splash reboot=pci"\n')])])])]),a._v(" "),t("li",[a._v("更新 grub 配置："),t("code",[a._v("sudo update-grub")])])]),a._v(" "),t("h3",{attrs:{id:"_3-4-从公钥服务器接收失败"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-4-从公钥服务器接收失败"}},[a._v("#")]),a._v(" 3.4 从公钥服务器接收失败")]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v(":: Importing keys with gpg...\ngpg: 从公钥服务器接收失败：一般错误\n")])])]),t("p",[a._v("手动指定可访问的密钥服务器以添加密钥（最后那一长串就是密钥）：")]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("gpg --keyserver keyserver.ubuntu.com --recv-keys 3C2C43D9447D5938EF4551EBE23B7E70B467F0BF\n")])])])])}),[],!1,null,null,null);e.default=r.exports}}]);