(window.webpackJsonp=window.webpackJsonp||[]).push([[76],{648:function(e,n,s){"use strict";s.r(n);var t=s(51),a=Object(t.a)({},(function(){var e=this,n=e.$createElement,s=e._self._c||n;return s("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[s("h1",{attrs:{id:"安装配置-vnc"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#安装配置-vnc"}},[e._v("#")]),e._v(" 安装配置 VNC")]),e._v(" "),s("h2",{attrs:{id:"linuxmint-安装-tigervnc-server"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#linuxmint-安装-tigervnc-server"}},[e._v("#")]),e._v(" LinuxMint 安装 TigerVNC Server")]),e._v(" "),s("h3",{attrs:{id:"_1-安装-tigervnc"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-安装-tigervnc"}},[e._v("#")]),e._v(" 1. 安装 tigervnc")]),e._v(" "),s("div",{staticClass:"language-shell script extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[e._v("sudo")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[e._v("apt")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[e._v("install")]),e._v(" tigervnc-standalone-server tigervnc-common\n")])])]),s("h3",{attrs:{id:"_2-vnc-服务相关命令"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-vnc-服务相关命令"}},[e._v("#")]),e._v(" 2. vnc 服务相关命令")]),e._v(" "),s("div",{staticClass:"language-shell script extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# 查看帮助")]),e._v("\nvncserver --help\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# 启动服务，初次启动会询问vnc密码，如果要重设vnc密码请运行 vncpasswd")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# 默认监听端口号是 1")]),e._v("\nvncserver\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# 停止在端口为 1 上面的vnc服务")]),e._v("\nvncserver -kill :1\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# 停止所有")]),e._v("\nvncserver -kill :*\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# 查看所有运行中的vnc服务")]),e._v("\nvncserver -list\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# 查看端口使用情况")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# 其中的 5901 对应的就是 1 端口")]),e._v("\nss -tulpn\n")])])]),s("h2",{attrs:{id:"_3-桌面环境设置"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-桌面环境设置"}},[e._v("#")]),e._v(" 3. 桌面环境设置")]),e._v(" "),s("p",[e._v("LinuxMint 使用的是 Cinnamon 桌面，所以需要对 "),s("code",[e._v("~/.vnc/xstartup")]),e._v(" 进行如下配置（注意最后一行）：")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v('#!/bin/sh\n\nxrdb $HOME/.Xresources\nxsetroot -solid grey\n# x-terminal-emulator -geometry 80x24+10+10 -ls -title "$VNCDESKTOP Desktop" &\n# x-window-manager &\n# Fix to make GNOME work\nexport XKL_XMODMAP_DISABLE=1\n/etc/X11/Xsession &\nexec dbus-launch cinnamon-session\n')])])]),s("ul",[s("li",[e._v("kde: "),s("code",[e._v("startkde &")])]),e._v(" "),s("li",[e._v("gnome: "),s("code",[e._v("gnome-session &")])]),e._v(" "),s("li",[e._v("xfce: "),s("code",[e._v("startxfce4 &")])]),e._v(" "),s("li",[e._v("lxde: "),s("code",[e._v("lxsession &")])])]),e._v(" "),s("p",[e._v("配置好后，重启vnc服务，用 VNC Viewer 之类的软件输入ip地址和端口号就可以连接了~。")]),e._v(" "),s("blockquote",[s("p",[e._v("如果连接的时候提示：“the connection was refused by the computer”，可能是因为 vnc 服务器只允许了 127.0.0.1 的连接，\n在 "),s("code",[e._v("/etc/vnc.conf")]),e._v(" 添加一行 "),s("code",[e._v('$localhost = "no";')]),e._v(" 然后重启服务可以解决这个问题。")])])])}),[],!1,null,null,null);n.default=a.exports}}]);