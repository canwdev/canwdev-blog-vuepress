(window.webpackJsonp=window.webpackJsonp||[]).push([[46],{671:function(_,s,t){"use strict";t.r(s);var a=t(29),e=Object(a.a)({},(function(){var _=this,s=_.$createElement,t=_._self._c||s;return t("ContentSlotsDistributor",{attrs:{"slot-key":_.$parent.slotKey}},[t("h1",{attrs:{id:"esxi-vmfs-手动分区"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#esxi-vmfs-手动分区"}},[_._v("#")]),_._v(" ESXi vmfs 手动分区")]),_._v(" "),t("ul",[t("li",[_._v("参考：https://blog.csdn.net/weixin_42293131/article/details/118420356")])]),_._v(" "),t("p",[_._v("使用 web 控制台分区的时候出现：无法创建VMFS数据存储，无法更改主机配置。为了不删除所有硬盘分区，我们需要手动进行分区。")]),_._v(" "),t("h2",{attrs:{id:"_1-查看分区表"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-查看分区表"}},[_._v("#")]),_._v(" 1. 查看分区表")]),_._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[_._v("[")]),_._v("root@localhost:/dev/disks"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[_._v("]")]),_._v(" partedUtil getptbl /dev/disks/t10.NVMe____WDC_WDS100T2B0C2D00PXH0__________________64FD30464A441B00\ngpt\n"),t("span",{pre:!0,attrs:{class:"token number"}},[_._v("121601")]),_._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[_._v("255")]),_._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[_._v("63")]),_._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[_._v("1953525168")]),_._v("\n"),t("span",{pre:!0,attrs:{class:"token number"}},[_._v("1")]),_._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[_._v("2048")]),_._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[_._v("616447")]),_._v(" C12A7328F81F11D2BA4B00A0C93EC93B systemPartition "),t("span",{pre:!0,attrs:{class:"token number"}},[_._v("128")]),_._v("\n"),t("span",{pre:!0,attrs:{class:"token number"}},[_._v("2")]),_._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[_._v("616448")]),_._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[_._v("878591")]),_._v(" E3C9E3160B5C4DB8817DF92DF00215AE microsoftRsvd "),t("span",{pre:!0,attrs:{class:"token number"}},[_._v("0")]),_._v("\n"),t("span",{pre:!0,attrs:{class:"token number"}},[_._v("3")]),_._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[_._v("878592")]),_._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[_._v("269316095")]),_._v(" 0FC63DAF848347728E793D69D8477DE4 unknown "),t("span",{pre:!0,attrs:{class:"token number"}},[_._v("0")]),_._v("\n"),t("span",{pre:!0,attrs:{class:"token number"}},[_._v("4")]),_._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[_._v("269316096")]),_._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[_._v("286095359")]),_._v(" 0657FD6DA4AB43C484E50933C84B4F4F linuxSwap "),t("span",{pre:!0,attrs:{class:"token number"}},[_._v("0")]),_._v("\n"),t("span",{pre:!0,attrs:{class:"token number"}},[_._v("5")]),_._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[_._v("286095360")]),_._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[_._v("554530815")]),_._v(" 0FC63DAF848347728E793D69D8477DE4 unknown "),t("span",{pre:!0,attrs:{class:"token number"}},[_._v("0")]),_._v("\n"),t("span",{pre:!0,attrs:{class:"token number"}},[_._v("6")]),_._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[_._v("554530816")]),_._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[_._v("822966271")]),_._v(" EBD0A0A2B9E5443387C068B6B72699C7 linuxNative "),t("span",{pre:!0,attrs:{class:"token number"}},[_._v("0")]),_._v("\n"),t("span",{pre:!0,attrs:{class:"token number"}},[_._v("7")]),_._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[_._v("822966272")]),_._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[_._v("1953523711")]),_._v(" 0FC63DAF848347728E793D69D8477DE4 unknown "),t("span",{pre:!0,attrs:{class:"token number"}},[_._v("0")]),_._v("\n")])]),_._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[_._v("1")]),t("br"),t("span",{staticClass:"line-number"},[_._v("2")]),t("br"),t("span",{staticClass:"line-number"},[_._v("3")]),t("br"),t("span",{staticClass:"line-number"},[_._v("4")]),t("br"),t("span",{staticClass:"line-number"},[_._v("5")]),t("br"),t("span",{staticClass:"line-number"},[_._v("6")]),t("br"),t("span",{staticClass:"line-number"},[_._v("7")]),t("br"),t("span",{staticClass:"line-number"},[_._v("8")]),t("br"),t("span",{staticClass:"line-number"},[_._v("9")]),t("br"),t("span",{staticClass:"line-number"},[_._v("10")]),t("br")])]),t("p",[_._v("其中，6 号是我们需要的分区。")]),_._v(" "),t("h2",{attrs:{id:"_2-重写分区表"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-重写分区表"}},[_._v("#")]),_._v(" 2. 重写分区表")]),_._v(" "),t("blockquote",[t("p",[_._v("记得备份！")])]),_._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[_._v("partedUtil setptbl /dev/disks/t10.NVMe____WDC_WDS100T2B0C2D00PXH0__________________64FD30464A441B00 gpt "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[_._v("\\")]),_._v("\n"),t("span",{pre:!0,attrs:{class:"token string"}},[_._v('"1 2048 616447 C12A7328F81F11D2BA4B00A0C93EC93B 128"')]),_._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[_._v("\\")]),_._v("\n"),t("span",{pre:!0,attrs:{class:"token string"}},[_._v('"2 616448 878591 E3C9E3160B5C4DB8817DF92DF00215AE 0"')]),_._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[_._v("\\")]),_._v("\n"),t("span",{pre:!0,attrs:{class:"token string"}},[_._v('"3 878592 269316095 0FC63DAF848347728E793D69D8477DE4 0"')]),_._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[_._v("\\")]),_._v("\n"),t("span",{pre:!0,attrs:{class:"token string"}},[_._v('"4 269316096 286095359 0657FD6DA4AB43C484E50933C84B4F4F 0"')]),_._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[_._v("\\")]),_._v("\n"),t("span",{pre:!0,attrs:{class:"token string"}},[_._v('"5 286095360 554530815 0FC63DAF848347728E793D69D8477DE4 0"')]),_._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[_._v("\\")]),_._v("\n"),t("span",{pre:!0,attrs:{class:"token string"}},[_._v('"6 554530816 822966271 AA31E02A400F11DB9590000C2911D1B8 0"')]),_._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[_._v("\\")]),_._v("\n"),t("span",{pre:!0,attrs:{class:"token string"}},[_._v('"7 822966272 1953523711 0FC63DAF848347728E793D69D8477DE4 0"')]),_._v("\n")])]),_._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[_._v("1")]),t("br"),t("span",{staticClass:"line-number"},[_._v("2")]),t("br"),t("span",{staticClass:"line-number"},[_._v("3")]),t("br"),t("span",{staticClass:"line-number"},[_._v("4")]),t("br"),t("span",{staticClass:"line-number"},[_._v("5")]),t("br"),t("span",{staticClass:"line-number"},[_._v("6")]),t("br"),t("span",{staticClass:"line-number"},[_._v("7")]),t("br"),t("span",{staticClass:"line-number"},[_._v("8")]),t("br")])]),t("h2",{attrs:{id:"_3-格式化新分区"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-格式化新分区"}},[_._v("#")]),_._v(" 3. 格式化新分区")]),_._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[_._v("vmkfstools -C vmfs6 -S nvme_datastore t10.NVMe____WDC_WDS100T2B0C2D00PXH0__________________64FD30464A441B00:6\n")])]),_._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[_._v("1")]),t("br")])]),t("p",[_._v("输出：")]),_._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[_._v("create fs deviceName:'t10.NVMe____WDC_WDS100T2B0C2D00PXH0__________________64FD30464A441B00:6', fsShortName:'vmfs6', fsName:'nvme_datastore'\ndeviceFullPath:/dev/disks/t10.NVMe____WDC_WDS100T2B0C2D00PXH0__________________64FD30464A441B00:6 deviceFile:t10.NVMe____WDC_WDS100T2B0C2D00PXH0__________________64FD30464A441B00:6\nATS on device /dev/disks/t10.NVMe____WDC_WDS100T2B0C2D00PXH0__________________64FD30464A441B00:6: not supported\n.\nChecking if remote hosts are using this device as a valid file system. This may take a few seconds...\nCreating vmfs6 file system on \"t10.NVMe____WDC_WDS100T2B0C2D00PXH0__________________64FD30464A441B00:6\" with blockSize 1048576, unmapGranularity 1048576, unmapPriority default and volume label \"nvme_datastore\".\nSuccessfully created new volume: 614fe1e0-e3c5bc6e-d842-1c697aa767ec\n")])]),_._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[_._v("1")]),t("br"),t("span",{staticClass:"line-number"},[_._v("2")]),t("br"),t("span",{staticClass:"line-number"},[_._v("3")]),t("br"),t("span",{staticClass:"line-number"},[_._v("4")]),t("br"),t("span",{staticClass:"line-number"},[_._v("5")]),t("br"),t("span",{staticClass:"line-number"},[_._v("6")]),t("br"),t("span",{staticClass:"line-number"},[_._v("7")]),t("br")])]),t("hr"),_._v(" "),t("h2",{attrs:{id:"附-esxi-esx-常用分区类型参考"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#附-esxi-esx-常用分区类型参考"}},[_._v("#")]),_._v(" 附：ESXi/ESX 常用分区类型参考")]),_._v(" "),t("table",[t("thead",[t("tr",[t("th",[_._v("分区")]),_._v(" "),t("th",[_._v("GUID")]),_._v(" "),t("th",[_._v("类型（十六进制）")]),_._v(" "),t("th",[_._v("类型（十进制）")])])]),_._v(" "),t("tbody",[t("tr",[t("td",[_._v("VMFS 数据存储")]),_._v(" "),t("td",[_._v("AA31E02A400F11DB9590000C2911D1B8")]),_._v(" "),t("td",[_._v("0xFB")]),_._v(" "),t("td",[_._v("251")])]),_._v(" "),t("tr",[t("td",[_._v("VMKCore 诊断")]),_._v(" "),t("td",[_._v("9D27538040AD11DBBF97000C2911D1B8")]),_._v(" "),t("td",[_._v("0xFC")]),_._v(" "),t("td",[_._v("252")])]),_._v(" "),t("tr",[t("td",[_._v("VMware 预留")]),_._v(" "),t("td",[_._v("9198EFFC31C011DB8F78000C2911D1B8")]),_._v(" "),t("td"),_._v(" "),t("td")]),_._v(" "),t("tr",[t("td",[_._v("基本数据")]),_._v(" "),t("td",[_._v("EBD0A0A2B9E5443387C068B6B72699C7")]),_._v(" "),t("td",[_._v("0x83")]),_._v(" "),t("td",[_._v("131")])]),_._v(" "),t("tr",[t("td",[_._v("Linux Swap")]),_._v(" "),t("td",[_._v("0657FD6DA4AB43C484E50933C84B4F4F")]),_._v(" "),t("td",[_._v("0x82")]),_._v(" "),t("td",[_._v("130")])]),_._v(" "),t("tr",[t("td",[_._v("Linux LVM")]),_._v(" "),t("td",[_._v("E6D6D379F50744C2A23C238F2A3DF928")]),_._v(" "),t("td",[_._v("0x8E")]),_._v(" "),t("td",[_._v("142")])]),_._v(" "),t("tr",[t("td",[_._v("Linux RAID")]),_._v(" "),t("td",[_._v("A19D880F05FC4D3BA006743F0F84911E")]),_._v(" "),t("td",[_._v("0xFD")]),_._v(" "),t("td",[_._v("253")])]),_._v(" "),t("tr",[t("td",[_._v("EFi 系统")]),_._v(" "),t("td",[_._v("C12A7328F81F11D2BA4B00A0C93EC93B")]),_._v(" "),t("td",[_._v("0xEF")]),_._v(" "),t("td",[_._v("239")])]),_._v(" "),t("tr",[t("td",[_._v("Microsoft 预留")]),_._v(" "),t("td",[_._v("E3C9E3160B5C4DB8817DF92DF00215AE")]),_._v(" "),t("td"),_._v(" "),t("td")]),_._v(" "),t("tr",[t("td",[_._v("未使用条目")]),_._v(" "),t("td",[_._v("00000000000000000000000000000000")]),_._v(" "),t("td"),_._v(" "),t("td")]),_._v(" "),t("tr",[t("td",[_._v("Fat16")]),_._v(" "),t("td"),_._v(" "),t("td",[_._v("0x6")]),_._v(" "),t("td",[_._v("6")])]),_._v(" "),t("tr",[t("td",[_._v("扩展")]),_._v(" "),t("td"),_._v(" "),t("td",[_._v("0x5")]),_._v(" "),t("td",[_._v("5")])]),_._v(" "),t("tr",[t("td",[_._v("SFS")]),_._v(" "),t("td"),_._v(" "),t("td",[_._v("0x42")]),_._v(" "),t("td",[_._v("66")])]),_._v(" "),t("tr",[t("td",[_._v("NTFS")]),_._v(" "),t("td"),_._v(" "),t("td",[_._v("0x7")]),_._v(" "),t("td",[_._v("7")])])])])])}),[],!1,null,null,null);s.default=e.exports}}]);