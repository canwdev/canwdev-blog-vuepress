(window.webpackJsonp=window.webpackJsonp||[]).push([[35],{573:function(s,t,a){"use strict";a.r(t);var e=a(57),r=Object(e.a)({},(function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"android-命令"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#android-命令"}},[s._v("#")]),s._v(" Android 命令")]),s._v(" "),a("h2",{attrs:{id:"网络-adb-调试"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#网络-adb-调试"}},[s._v("#")]),s._v(" 网络 ADB 调试")]),s._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 用 USB 线将设备连接到电脑")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 为了确保设备已连接，可以先在 adb shell 中查看设备 ip 地址")]),s._v("\nadb shell\n$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("ifconfig")]),s._v("\n$ "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("exit")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 开启网络调试，监听在 5555 端口")]),s._v("\nadb tcpip "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("5555")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 连接网络adb")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 如 adb connect 192.168.1.103:5555")]),s._v("\nadb connect IP地址"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v(":端口号"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n")])])]),a("h2",{attrs:{id:"通过-adb-启动-shizuku"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#通过-adb-启动-shizuku"}},[s._v("#")]),s._v(" 通过 adb 启动 shizuku")]),s._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"https://shizuku.rikka.app/zh-hans/",target:"_blank",rel:"noopener noreferrer"}},[s._v("Shizuku 让你的应用直接使用系统 API"),a("OutboundLink")],1)])]),s._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[s._v("adb shell "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sh")]),s._v(" /data/user_de/0/moe.shizuku.privileged.api/start.sh\n")])])]),a("h2",{attrs:{id:"炼妖壶"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#炼妖壶"}},[s._v("#")]),s._v(" 炼妖壶")]),s._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("adb shell\n\n# 开启 File Shuttle\npm grant com.oasisfeng.island android.permission.INTERACT_ACROSS_USERS\n")])])]),a("h2",{attrs:{id:"常用-adb-命令"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#常用-adb-命令"}},[s._v("#")]),s._v(" 常用 ADB 命令")]),s._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 重置 adb 服务")]),s._v("\nadb kill-server\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 参考：https://github.com/jaredrummler/android-shell-scripts")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 快速重启")]),s._v("\nsetprop ctl.restart zygote\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 重启至 bootloader")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("reboot")]),s._v(" bootloader\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 重启至 recovery")]),s._v("\nsetprop ctl.start pre-recovery\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sleep")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("reboot")]),s._v(" recovery "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# fallback")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 重启")]),s._v("\nsetprop sys.powerctl "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("reboot")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sleep")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("reboot")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# fallback")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 重启 SystemUI")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("service")]),s._v(" call activity "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("42")]),s._v(" s16 com.android.systemui\nam startservice -n com.android.systemui/.SystemUIService\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 关机")]),s._v("\nsetprop sys.powerctl "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("shutdown")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sleep")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("reboot")]),s._v(" -p "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# fallback")]),s._v("\n")])])]),a("h2",{attrs:{id:"nokia-n1-开启-otg-命令"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#nokia-n1-开启-otg-命令"}},[s._v("#")]),s._v(" Nokia N1 开启 OTG 命令")]),s._v(" "),a("blockquote",[a("p",[s._v("注：开启后在重启之前都不能充电。")])]),s._v(" "),a("div",{staticClass:"language-shell script extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" A "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" /sys/kernel/debug/usb/dwc3_debugfs_root/otg_id\n")])])]),a("h2",{attrs:{id:"build-prop-优化代码"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#build-prop-优化代码"}},[s._v("#")]),s._v(" build.prop 优化代码")]),s._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Disables logcat")]),s._v("\nlogcat.live"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("disable\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Disable Automatic Error Reporting")]),s._v("\nprofiler.force_disable_err_rpt"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\nprofiler.force_disable_ulog"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\nro.kernel.checkjni"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\nro.kernel.android.checkjni"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\npersist.android.strictmode"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Better net speeds.")]),s._v("\nnet.tcp.buffersize.default"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4096,87380")]),s._v(",256960, "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4096")]),s._v(", "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("16384,256960")]),s._v("\nnet.tcp.buffersize.wifi"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4096,87380")]),s._v(",256960,409 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("6,163")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("84,256960")]),s._v("\nnet.tcp.buffersize.umts"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4096,8")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("7380,256960")]),s._v(",4096,163 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("84,256960")]),s._v("\nnet.tcp.buffersize.gprs"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4096,8")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("7380,256960")]),s._v(",4096,163 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("84,256960")]),s._v("\nnet.tcp.buffersize.edge"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4096,8")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("7380,256960")]),s._v(",4096,163 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("84,256960")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Better scrolling.")]),s._v("\nwindowsmgr.max_events_per_sec"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("150")]),s._v("\nro.min_pointer_dur"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("8")]),s._v(" ro.max.fling_velocity"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("12000")]),s._v("\nro.min.fling_velocity"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("8000")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Faster boot.")]),s._v("\nro.config.hw_quickpoweron"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("true\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 关闭开机动画")]),s._v("\ndebug.sf.nobootanimation"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 低内存模式")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# https://source.android.com/devices/tech/perf/low-ram")]),s._v("\nro.config.low_ram"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("true\n")])])]),a("h2",{attrs:{id:"使用-fastboot-刷入-recovery"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#使用-fastboot-刷入-recovery"}},[s._v("#")]),s._v(" 使用 fastboot 刷入 Recovery")]),s._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看设备列表")]),s._v("\nfastboot.exe devices\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 刷入 recovery 到 recovery 分区")]),s._v("\nfastboot.exe flash recovery recovery.img\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 立即引导 recovery")]),s._v("\nfastboot.exe boot recovery.img\n")])])]),a("h2",{attrs:{id:"刷机常见问题"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#刷机常见问题"}},[s._v("#")]),s._v(" 刷机常见问题")]),s._v(" "),a("ul",[a("li",[a("p",[a("RouterLink",{attrs:{to:"/manual/android-rom-modify/"}},[s._v("Android ROM 在 Ubuntu 下的 system.new.dat 的解包、修改和打包")])],1)]),s._v(" "),a("li",[a("p",[s._v("如果无法刷入，请检查")]),s._v(" "),a("ul",[a("li",[s._v("设备型号与脚本判定是否一致，如果要强刷，请修改刷机包 "),a("code",[s._v("\\META-INF\\com\\google\\android\\updater-script")]),s._v(" 里的判定机制")]),s._v(" "),a("li",[s._v("底包（firmware）是否达到要求，如果底包版本过低则无法刷入")]),s._v(" "),a("li",[s._v("TWRP 是否支持刷入该版本的Android")])])]),s._v(" "),a("li",[a("p",[s._v("如果刷入后卡第一屏（无开机动画）")]),s._v(" "),a("ul",[a("li",[s._v("可能是 /data 分区出了问题，先备份数据，然后完全格式化 /data 分区，再重新刷入")]),s._v(" "),a("li",[s._v("可能是 ROM 本身的问题")])])]),s._v(" "),a("li",[a("p",[s._v("如果重启后总是进入 recovery")]),s._v(" "),a("ul",[a("li",[s._v("可能是把 recovery.img 刷入了 boot 分区导致的")]),s._v(" "),a("li",[s._v("可能是 boot 损坏了导致自动启动 recovery 分区")]),s._v(" "),a("li",[s._v("线刷官方包或者卡刷上一次能用的包应该可以解决问题")])])])])])}),[],!1,null,null,null);t.default=r.exports}}]);