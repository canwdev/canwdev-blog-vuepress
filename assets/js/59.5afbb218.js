(window.webpackJsonp=window.webpackJsonp||[]).push([[59],{598:function(t,n,s){"use strict";s.r(n);var a=s(57),p=Object(a.a)({},(function(){var t=this,n=t.$createElement,s=t._self._c||n;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"php-的安装与配置"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#php-的安装与配置"}},[t._v("#")]),t._v(" PHP 的安装与配置")]),t._v(" "),s("h2",{attrs:{id:"在-ubuntu-下安装-php-配合-nginx-使用"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#在-ubuntu-下安装-php-配合-nginx-使用"}},[t._v("#")]),t._v(" 在 Ubuntu 下安装 php 配合 nginx 使用")]),t._v(" "),s("p",[t._v("php 需要配合 nginx 或 apache 才能使用，所以请完成前置条件："),s("RouterLink",{attrs:{to:"/manual/setup-nginx.html"}},[t._v("Nginx 安装与配置")]),t._v("。")],1),t._v(" "),s("p",[t._v("安装 php：")]),t._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("apt")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" php7.3\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("apt")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" php-fpm php-mysql\n")])])]),s("p",[t._v("配置 nginx，编辑 "),s("code",[t._v("/etc/nginx/sites-available/default")]),t._v("，添加：")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("server {\n        listen 3000;\n        server_name localhost;\n        root /usr/www/nextcloud; #①\n        index index.php;\n\n        location / {\n                try_files $uri $uri/ =404;\n        }\n\n        location ~ \\.php$ {\n            fastcgi_pass unix:/run/php/php7.3-fpm.sock; #②\n            include snippets/fastcgi-php.conf;\n            fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;\n        }\n\n        location ~ /\\.ht {\n                deny all;\n        }\n}\n")])])]),s("p",[t._v("有几个要注意的地方：")]),t._v(" "),s("ul",[s("li",[t._v("① 指定的网站根目录，应该有一个 "),s("code",[t._v("index.php")]),t._v(" 文件")]),t._v(" "),s("li",[t._v("② php-fpm，根据你的本机环境自行替换")])]),t._v(" "),s("p",[t._v("执行 "),s("code",[t._v("nginx -s reload")]),t._v(" 重新加载配置文件，如果没有报错则成功。")]),t._v(" "),s("p",[t._v("测试是否成功：")]),t._v(" "),s("p",[t._v("在 "),s("code",[t._v("/usr/www/nextcloud")]),t._v(" 创建一个 "),s("code",[t._v("index.php")]),t._v("，内容写上：")]),t._v(" "),s("div",{staticClass:"language-php extra-class"},[s("pre",{pre:!0,attrs:{class:"language-php"}},[s("code",[s("span",{pre:!0,attrs:{class:"token php language-php"}},[s("span",{pre:!0,attrs:{class:"token delimiter important"}},[t._v("<?php")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("phpinfo")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])])]),s("p",[t._v("打开 "),s("code",[t._v("localhost:3000")]),t._v("，成功的话可以看到类似这样的内容："),s("code",[t._v("PHP Version 7.3.11-0ubuntu0.19.10.4")]),t._v(" 和 php的运行信息。")]),t._v(" "),s("h2",{attrs:{id:"修改-php-配置文件"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#修改-php-配置文件"}},[t._v("#")]),t._v(" 修改 php 配置文件")]),t._v(" "),s("p",[t._v("php 的配置一般在 "),s("code",[t._v("/etc/php/7.3/cli/php.ini")]),t._v("，获取权限后，使用文本编辑器编辑即可。")]),t._v(" "),s("p",[t._v("例如，可以搜索 "),s("code",[t._v("cgi.fix_pathinfo=")]),t._v(" 将其值改为 "),s("code",[t._v("0")]),t._v(" 并取消注释。")]),t._v(" "),s("p",[t._v("修改完成后，重启 php-fpm 服务来生效："),s("code",[t._v("sudo systemctl restart php7.3-fpm.service")])])])}),[],!1,null,null,null);n.default=p.exports}}]);