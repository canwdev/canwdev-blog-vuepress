<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Docker å­¦ä¹ ç¬”è®° | Canwdev&#39;s Blog</title>
    <meta name="generator" content="VuePress 1.8.0">
    <link rel="icon" href="/favicon.png">
    <meta name="description" content="è®°å½•å­¦ä¹ è¿‡ç¨‹">
    <meta name="keywords" content="å‰ç«¯åšå®¢,ä¸ªäººæŠ€æœ¯åšå®¢">
    <meta name="theme-color" content="#1976d2">
    <link rel="preload" href="/assets/css/0.styles.dfedc523.css" as="style"><link rel="preload" href="/assets/js/app.6402e89f.js" as="script"><link rel="preload" href="/assets/js/2.ea95b221.js" as="script"><link rel="preload" href="/assets/js/3.d80f252a.js" as="script"><link rel="preload" href="/assets/js/12.e0813766.js" as="script"><link rel="prefetch" href="/assets/js/10.183a2754.js"><link rel="prefetch" href="/assets/js/100.1cd0dc64.js"><link rel="prefetch" href="/assets/js/101.ceb81393.js"><link rel="prefetch" href="/assets/js/102.14e20bd3.js"><link rel="prefetch" href="/assets/js/11.1931ee04.js"><link rel="prefetch" href="/assets/js/13.b49bc0bc.js"><link rel="prefetch" href="/assets/js/14.fdc62012.js"><link rel="prefetch" href="/assets/js/15.e4a35e0b.js"><link rel="prefetch" href="/assets/js/16.6e246cf5.js"><link rel="prefetch" href="/assets/js/17.78579b92.js"><link rel="prefetch" href="/assets/js/18.c2c9009b.js"><link rel="prefetch" href="/assets/js/19.9b2ec27a.js"><link rel="prefetch" href="/assets/js/20.9b1be8b0.js"><link rel="prefetch" href="/assets/js/21.ce5693b8.js"><link rel="prefetch" href="/assets/js/22.52275d07.js"><link rel="prefetch" href="/assets/js/23.61c4caaa.js"><link rel="prefetch" href="/assets/js/24.215ae879.js"><link rel="prefetch" href="/assets/js/25.8da1b127.js"><link rel="prefetch" href="/assets/js/26.8f7f6d5d.js"><link rel="prefetch" href="/assets/js/27.65a2e386.js"><link rel="prefetch" href="/assets/js/28.b6cc8f0d.js"><link rel="prefetch" href="/assets/js/29.93d20af1.js"><link rel="prefetch" href="/assets/js/30.c1931422.js"><link rel="prefetch" href="/assets/js/31.b46f2dd9.js"><link rel="prefetch" href="/assets/js/32.324825ed.js"><link rel="prefetch" href="/assets/js/33.b35e5bca.js"><link rel="prefetch" href="/assets/js/34.bb470fcd.js"><link rel="prefetch" href="/assets/js/35.fae68ceb.js"><link rel="prefetch" href="/assets/js/36.3e32f0d7.js"><link rel="prefetch" href="/assets/js/37.5b48ef49.js"><link rel="prefetch" href="/assets/js/38.8268c5c5.js"><link rel="prefetch" href="/assets/js/39.e9a66fe9.js"><link rel="prefetch" href="/assets/js/4.4657b3e2.js"><link rel="prefetch" href="/assets/js/40.460e5851.js"><link rel="prefetch" href="/assets/js/41.edf0ced4.js"><link rel="prefetch" href="/assets/js/42.00e14951.js"><link rel="prefetch" href="/assets/js/43.cdc3b8d3.js"><link rel="prefetch" href="/assets/js/44.27e89003.js"><link rel="prefetch" href="/assets/js/45.0cea2b70.js"><link rel="prefetch" href="/assets/js/46.1249beed.js"><link rel="prefetch" href="/assets/js/47.daf36dbd.js"><link rel="prefetch" href="/assets/js/48.b21b5752.js"><link rel="prefetch" href="/assets/js/49.ab364ea2.js"><link rel="prefetch" href="/assets/js/5.5746cdb8.js"><link rel="prefetch" href="/assets/js/50.28314dd4.js"><link rel="prefetch" href="/assets/js/51.7862c42d.js"><link rel="prefetch" href="/assets/js/52.444dc222.js"><link rel="prefetch" href="/assets/js/53.02018c4a.js"><link rel="prefetch" href="/assets/js/54.4a95a0bc.js"><link rel="prefetch" href="/assets/js/55.f794652d.js"><link rel="prefetch" href="/assets/js/56.dff9b848.js"><link rel="prefetch" href="/assets/js/57.cc77f8bf.js"><link rel="prefetch" href="/assets/js/58.6a2b9a2a.js"><link rel="prefetch" href="/assets/js/59.dfd753d5.js"><link rel="prefetch" href="/assets/js/6.4e704c68.js"><link rel="prefetch" href="/assets/js/60.29297a77.js"><link rel="prefetch" href="/assets/js/61.4531e507.js"><link rel="prefetch" href="/assets/js/62.69035ada.js"><link rel="prefetch" href="/assets/js/63.474446b8.js"><link rel="prefetch" href="/assets/js/64.0162a9e4.js"><link rel="prefetch" href="/assets/js/65.6598b6b3.js"><link rel="prefetch" href="/assets/js/66.0676c5b3.js"><link rel="prefetch" href="/assets/js/67.da96f1bb.js"><link rel="prefetch" href="/assets/js/68.5338a609.js"><link rel="prefetch" href="/assets/js/69.66d84f56.js"><link rel="prefetch" href="/assets/js/7.2f4acc5c.js"><link rel="prefetch" href="/assets/js/70.d6e0a83a.js"><link rel="prefetch" href="/assets/js/71.02d841f2.js"><link rel="prefetch" href="/assets/js/72.a9821854.js"><link rel="prefetch" href="/assets/js/73.63700328.js"><link rel="prefetch" href="/assets/js/74.b6e81ad4.js"><link rel="prefetch" href="/assets/js/75.a9cc857b.js"><link rel="prefetch" href="/assets/js/76.747c39b8.js"><link rel="prefetch" href="/assets/js/77.8a310d14.js"><link rel="prefetch" href="/assets/js/78.4a3569b1.js"><link rel="prefetch" href="/assets/js/79.833ee595.js"><link rel="prefetch" href="/assets/js/8.957f29ee.js"><link rel="prefetch" href="/assets/js/80.4af36675.js"><link rel="prefetch" href="/assets/js/81.2720a976.js"><link rel="prefetch" href="/assets/js/82.abaf0b89.js"><link rel="prefetch" href="/assets/js/83.aa697c61.js"><link rel="prefetch" href="/assets/js/84.0f0abfeb.js"><link rel="prefetch" href="/assets/js/85.b2b1801f.js"><link rel="prefetch" href="/assets/js/86.c1696fee.js"><link rel="prefetch" href="/assets/js/87.bd6cf45c.js"><link rel="prefetch" href="/assets/js/88.3a5206d7.js"><link rel="prefetch" href="/assets/js/89.30c7847a.js"><link rel="prefetch" href="/assets/js/9.8a1b0bba.js"><link rel="prefetch" href="/assets/js/90.9ee0e589.js"><link rel="prefetch" href="/assets/js/91.82e203d1.js"><link rel="prefetch" href="/assets/js/92.24e1695c.js"><link rel="prefetch" href="/assets/js/93.4ded2a47.js"><link rel="prefetch" href="/assets/js/94.087f028f.js"><link rel="prefetch" href="/assets/js/95.18d8b24f.js"><link rel="prefetch" href="/assets/js/96.a9e25ad2.js"><link rel="prefetch" href="/assets/js/97.21edf5f7.js"><link rel="prefetch" href="/assets/js/98.f59d5441.js"><link rel="prefetch" href="/assets/js/99.128df231.js">
    <link rel="stylesheet" href="/assets/css/0.styles.dfedc523.css">
  </head>
  <body class="theme-mode-light">
    <div id="app" data-server-rendered="true"><div class="theme-container sidebar-open no-sidebar have-rightmenu"><header class="navbar blur"><div title="ç›®å½•" class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/favicon.png" alt="Canwdev's Blog" class="logo"> <span class="site-name can-hide">Canwdev's Blog</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">ğŸ–‹ï¸ åšå®¢</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="ç¦»çº¿ç¬”è®°" class="dropdown-title"><a href="/notes/" class="link-title">ç¦»çº¿ç¬”è®°</a> <span class="title" style="display:none;">ç¦»çº¿ç¬”è®°</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/notes/" class="nav-link">ğŸ“ ç¬”è®°</a></li><li class="dropdown-item"><!----> <a href="/manual/" class="nav-link">ğŸ““ æ‰‹å†Œ</a></li></ul></div></div><div class="nav-item"><a href="/about/" class="nav-link">å…³äº</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="ç´¢å¼•" class="dropdown-title"><a href="/archives/" class="link-title">ç´¢å¼•</a> <span class="title" style="display:none;">ç´¢å¼•</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/" class="nav-link">åˆ†ç±»</a></li><li class="dropdown-item"><!----> <a href="/tags/" class="nav-link">æ ‡ç­¾</a></li><li class="dropdown-item"><!----> <a href="/archives/" class="nav-link">å½’æ¡£</a></li></ul></div></div> <a href="https://github.com/canwdev/notes-vuepress" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar" style="display:none;"><div class="blogger"><img src="/img/avatar.jpg"> <div class="blogger-info"><h3>Canwdev</h3> <span>å‰ç«¯æ‘¸é±¼ä¸­...</span></div></div> <nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">ğŸ–‹ï¸ åšå®¢</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="ç¦»çº¿ç¬”è®°" class="dropdown-title"><a href="/notes/" class="link-title">ç¦»çº¿ç¬”è®°</a> <span class="title" style="display:none;">ç¦»çº¿ç¬”è®°</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/notes/" class="nav-link">ğŸ“ ç¬”è®°</a></li><li class="dropdown-item"><!----> <a href="/manual/" class="nav-link">ğŸ““ æ‰‹å†Œ</a></li></ul></div></div><div class="nav-item"><a href="/about/" class="nav-link">å…³äº</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="ç´¢å¼•" class="dropdown-title"><a href="/archives/" class="link-title">ç´¢å¼•</a> <span class="title" style="display:none;">ç´¢å¼•</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/" class="nav-link">åˆ†ç±»</a></li><li class="dropdown-item"><!----> <a href="/tags/" class="nav-link">æ ‡ç­¾</a></li><li class="dropdown-item"><!----> <a href="/archives/" class="nav-link">å½’æ¡£</a></li></ul></div></div> <a href="https://github.com/canwdev/notes-vuepress" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <!----> </aside> <div><main class="page"><div class="theme-vdoing-wrapper "><div class="articleInfo-wrap" data-v-1cd794fe><div class="articleInfo" data-v-1cd794fe><ul class="breadcrumbs" data-v-1cd794fe><li data-v-1cd794fe><a href="/" title="é¦–é¡µ" class="iconfont icon-home router-link-active" data-v-1cd794fe></a></li> <li data-v-1cd794fe><a href="/categories/?category=notes" title="åˆ†ç±»" data-v-1cd794fe>notes</a></li> <!----> <!----></ul> <div class="info" data-v-1cd794fe><div title="ä½œè€…" class="author iconfont icon-touxiang" data-v-1cd794fe><a href="https://github.com/canwdev" target="_blank" title="ä½œè€…" class="beLink" data-v-1cd794fe>Canwdev</a></div> <div title="åˆ›å»ºæ—¶é—´" class="date iconfont icon-riqi" data-v-1cd794fe><a href="javascript:;" data-v-1cd794fe>2021-01-01</a></div> <!----></div></div></div> <!----> <div class="content-wrapper"><div class="right-menu-wrapper"><div class="right-menu-margin"><div class="right-menu-content"></div></div></div> <h1><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAAXNSR0IArs4c6QAABKFJREFUSA3tVl1oFVcQnrMbrak3QUgkya1akpJYcrUtIqW1JvFBE9LiQ5v6JmJpolbMg32rVrhgoYK0QiMY6i9Y6EMaW5D+xFJaTYItIuK2Kr3+BJNwkxBj05sQY3b3nM6cs2dv9t7NT/vQJw/sndk5M/PNzJkzewGerP+pAmy+ON8lLzUJgA8ZYxYIYZmGYRnctDaWvJJAmTtfP1pvXsBCCPP8QFcCaRkZYACgDZFO4stNIcBCajEOlmmC9XpJ9bAGCaPaPmzPl32dvLSVu3BWCTQs0XQQ6g0DYgwLIoAZbBCdW/i+781o1VVlm/410mw4h06Y7bIPHNyWDyL4FHkX03Q8SrzNhZTZriieckWt7cL6MM85YcLpsi/7O9/iXFT6MswI0DmmpkSaJ0qLxFIm3+i1THHB3zmBH3PYx9CcykcLOeQVVa7QtdxTgQgEleX2AjHYfwA+2ddV77ruGoJUbhGDI09YSNXyMpUt5ylOzxgbUmtOp7NmbNt8v3arjTBfYELmLUV+M+nSawNNAUqpT3ClJWg5I3BLT+cGW/DXNGCa6tx1aakCGEigArTn4TDIPdrXXYKCZNrHLMCOEPvHBlLQ99s9eHB7EB6NTki73CVPQ2F5MSx/uRQixfmq7rK0wYD8w8E905bnPDfwoWs/rfv93NWN/ZfvwsLIU7A09gxECyISeGJkHAau98L97tuw7NXnoPyNF8FcYGLGKsOs0mN3OEyec9esGW/ZEl945dTP34wlR2FZVQWU1q0Cw8Tr7p+hgLLNL0FPxx/Q35mA8aEUrH6nCgwEl0tn7wUiZYJnNRh6DK4UH/k0lfyrsBKdPVv/AriGIQcEDQZ65LBAGe2Rzui9Ybjz7XUppz1/uKBbyVPGkN3ZAeC6hr0x7Nr38N5+EqkoOm17xpoqR9ohQF55ERSvr4Dkr3chNfC3DMzGJlNBElW8w9nsGQvhNGIzDkXzCg8cLK951xHsFBlTJspJNi3ZFIMF2AeDV3q8DNOB+YHi6QTrChDIWDBRi5U5f+ZMfJLu3ccrqxtdxk4SKH336LFxSmkqefwU5T8fhdSdQf9IVKD6aNiwI/hnmcAZ91isYMJIaCUCx9W098+LgruikeTqzqqxKPUwqJyCPJiyemVVZBOijDGjD38Os0jOiSPL1z3SPjXNANbiNPXAdzTfukjjuknNBbyz3nwgTd3AVFqUJ5hpHlq9MveLnWwttUfoygBmvVjuikxND3znrhsELnZk7k+OjIGxeNEkomyLVta0xxn+HZhjBc4YZ/AFjHjz9u3xRZl2BN4aq9nFwWh16IrQ1aHHEd3j1+4/dB9OtH4e29A2H1DyHQRmOSfQZ1Fy7MHBTGB6J/Djq6p3OxyO2cB+4Car7v/o3GXgfAkj23+x9ID1Teoamo/SXcbvSf2PX7Vc8DdCmE1vN9di+32P9/5YR3vLnhCVGUWBjEkr3yh4H8v9CzmsbdhzOKzsJKM90iFdaTMjRPhGVsakRvOaRidljo6H6G7j+ctrJpsP+4COhDIl0La2+FS4+5mlocBaXY5QnGZysIBYoeSsl5qQzrSj/cgNrfuEzlWBfwA+EjrZyWUvpAAAAABJRU5ErkJggg==">
          Docker å­¦ä¹ ç¬”è®°
        </h1>  <div class="theme-vdoing-content content__default"><h1 id="docker-å­¦ä¹ ç¬”è®°"><a href="#docker-å­¦ä¹ ç¬”è®°" class="header-anchor">#</a> Docker å­¦ä¹ ç¬”è®°</h1> <blockquote><p>ã€Šç¬¬ä¸€æœ¬ Docker ä¹¦ã€‹çš„è¯»ä¹¦ç¬”è®°ã€‚</p></blockquote> <p><img src="/assets/img/image-20200805164924891.4741e9ca.png" alt="image-20200805164924891"></p> <p>é“¾æ¥ï¼š</p> <ul><li><p><img src="data:image/gif;base64,R0lGODlhDwAPAHcAACH/C01TT0ZGSUNFOS4wDQAAAAFzUkdCAK7OHOkAIf8LTVNPRkZJQ0U5LjAYAAAADG1zT1BNU09GRklDRTkuMERuJlAzACH/C01TT0ZGSUNFOS4wGAAAAAxjbVBQSkNtcDA3MTICAQEGiroUzgAh+QQBAAABACwAAAAADwAPAIb/99jAwMD/0BP/1Cf/2Dv/32IAAABSUf94eP+Mi/+fnv/Fxf//8LD/88QFBP8sK///9MT/+Nj/77D/88X/6In/8LH/2tr/v7//sbH/o6P/h4f/eXn/1zv/4GL/z8//s7P/pqb/mJf/xMT/qKf/mpr/jIz/cXD/YmL/ra3/kZL/hIP/dXb/Wlr/TEz/oqL/hob/eHf/amr/Tk7/QUD/lpb/enr/bW3/Xl//0BSfn//Gxf95d/+Li///6Ir/54l5eP94d/9SUv8sKv8rK/8BAgMBAgMBAgMBAgMBAgMBAgMBAgMBAgMBAgMBAgMBAgMBAgMBAgMBAgMBAgMBAgMBAgMBAgMBAgMBAgMBAgMBAgMBAgMBAgMBAgMBAgMBAgMBAgMBAgMBAgMBAgMBAgMBAgMBAgMBAgMBAgMBAgMBAgMBAgMBAgMBAgMBAgMBAgMBAgMBAgMBAgMBAgMBAgMBAgMBAgMBAgMBAgMBAgMBAgMBAgMBAgMBAgMBAgMBAgMBAgMHh4ABgoOEhYaCBoeDAgMcBQYUFQ0AhjgDBB0GPgyThowEj5sQEZ6XjxQSE6SFlqCQnJQBNDU2N5YcmT0SnQEuLzAxMjMODwYHCDw5OgEoKSorLC0OQsZACQoLASIjJCUmJ9PGCNfZHh8gIQbq6+wGFhcYGRobDkPGP9fLhsQGQTs82BQFSFQoEAA7" alt="*"> <a href="https://github.com/turnbullpress/dockerbook-code" target="_blank" rel="noopener noreferrer">ä¹¦ä¸­æºç <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></li> <li><p><img src="data:image/gif;base64,R0lGODlhDwAPAHcAACH/C01TT0ZGSUNFOS4wDQAAAAFzUkdCAK7OHOkAIf8LTVNPRkZJQ0U5LjAYAAAADG1zT1BNU09GRklDRTkuMERuJlAzACH/C01TT0ZGSUNFOS4wGAAAAAxjbVBQSkNtcDA3MTICAQEGiroUzgAh+QQBAAABACwAAAAADwAPAIb/99jAwMD/0BP/1Cf/2Dv/32IAAABSUf94eP+Mi/+fnv/Fxf//8LD/88QFBP8sK///9MT/+Nj/77D/88X/6In/8LH/2tr/v7//sbH/o6P/h4f/eXn/1zv/4GL/z8//s7P/pqb/mJf/xMT/qKf/mpr/jIz/cXD/YmL/ra3/kZL/hIP/dXb/Wlr/TEz/oqL/hob/eHf/amr/Tk7/QUD/lpb/enr/bW3/Xl//0BSfn//Gxf95d/+Li///6Ir/54l5eP94d/9SUv8sKv8rK/8BAgMBAgMBAgMBAgMBAgMBAgMBAgMBAgMBAgMBAgMBAgMBAgMBAgMBAgMBAgMBAgMBAgMBAgMBAgMBAgMBAgMBAgMBAgMBAgMBAgMBAgMBAgMBAgMBAgMBAgMBAgMBAgMBAgMBAgMBAgMBAgMBAgMBAgMBAgMBAgMBAgMBAgMBAgMBAgMBAgMBAgMBAgMBAgMBAgMBAgMBAgMBAgMBAgMBAgMBAgMBAgMBAgMBAgMBAgMBAgMHh4ABgoOEhYaCBoeDAgMcBQYUFQ0AhjgDBB0GPgyThowEj5sQEZ6XjxQSE6SFlqCQnJQBNDU2N5YcmT0SnQEuLzAxMjMODwYHCDw5OgEoKSorLC0OQsZACQoLASIjJCUmJ9PGCNfZHh8gIQbq6+wGFhcYGRobDkPGP9fLhsQGQTs82BQFSFQoEAA7" alt="*"> <a href="https://gitee.com/canwdev/learn-docker" target="_blank" rel="noopener noreferrer">learn-docker å­¦ä¹ é¡¹ç›®<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></li> <li><p><img src="data:image/gif;base64,R0lGODlhDwAPAHcAACH/C01TT0ZGSUNFOS4wDQAAAAFzUkdCAK7OHOkAIf8LTVNPRkZJQ0U5LjAYAAAADG1zT1BNU09GRklDRTkuMERuJlAzACH/C01TT0ZGSUNFOS4wGAAAAAxjbVBQSkNtcDA3MTICAQEGiroUzgAh+QQBAAABACwAAAAADwAPAIb/99jAwMD/0BP/1Cf/2Dv/32IAAABSUf94eP+Mi/+fnv/Fxf//8LD/88QFBP8sK///9MT/+Nj/77D/88X/6In/8LH/2tr/v7//sbH/o6P/h4f/eXn/1zv/4GL/z8//s7P/pqb/mJf/xMT/qKf/mpr/jIz/cXD/YmL/ra3/kZL/hIP/dXb/Wlr/TEz/oqL/hob/eHf/amr/Tk7/QUD/lpb/enr/bW3/Xl//0BSfn//Gxf95d/+Li///6Ir/54l5eP94d/9SUv8sKv8rK/8BAgMBAgMBAgMBAgMBAgMBAgMBAgMBAgMBAgMBAgMBAgMBAgMBAgMBAgMBAgMBAgMBAgMBAgMBAgMBAgMBAgMBAgMBAgMBAgMBAgMBAgMBAgMBAgMBAgMBAgMBAgMBAgMBAgMBAgMBAgMBAgMBAgMBAgMBAgMBAgMBAgMBAgMBAgMBAgMBAgMBAgMBAgMBAgMBAgMBAgMBAgMBAgMBAgMBAgMBAgMBAgMBAgMBAgMBAgMBAgMHh4ABgoOEhYaCBoeDAgMcBQYUFQ0AhjgDBB0GPgyThowEj5sQEZ6XjxQSE6SFlqCQnJQBNDU2N5YcmT0SnQEuLzAxMjMODwYHCDw5OgEoKSorLC0OQsZACQoLASIjJCUmJ9PGCNfZHh8gIQbq6+wGFhcYGRobDkPGP9fLhsQGQTs82BQFSFQoEAA7" alt="*"> <a href="https://gitee.com/canwdev/docker-server" target="_blank" rel="noopener noreferrer">docker-server å®ç”¨åŒ–é¡¹ç›®<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></li></ul> <h2 id="docker-åŸºç¡€"><a href="#docker-åŸºç¡€" class="header-anchor">#</a> Docker åŸºç¡€</h2> <h3 id="åœ¨-ubuntu-å®‰è£…-docker"><a href="#åœ¨-ubuntu-å®‰è£…-docker" class="header-anchor">#</a> åœ¨ Ubuntu å®‰è£… Docker</h3> <p>å‚è€ƒæ–‡æ¡£ï¼šhttps://docs.docker.com/engine/install/ubuntu/</p> <p>ä¸‹é¢æ˜¯<a href="https://mirrors.huaweicloud.com/" target="_blank" rel="noopener noreferrer">åä¸ºå¼€æºé•œåƒç«™<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>çš„è¯´æ˜ï¼Œå›½å†…æ¨èä½¿ç”¨è¿™ç§æ–¹å¼å®‰è£…ã€‚</p> <p>1ã€è‹¥æ‚¨å®‰è£…è¿‡dockerï¼Œéœ€è¦å…ˆåˆ æ‰ï¼Œä¹‹åå†å®‰è£…ä¾èµ–:</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token function">sudo</span> <span class="token function">apt-get</span> remove docker docker-engine docker.io
<span class="token function">sudo</span> <span class="token function">apt-get</span> <span class="token function">install</span> apt-transport-https ca-certificates <span class="token function">curl</span> gnupg2 software-properties-common
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>2ã€æ ¹æ®ç‰ˆæœ¬ä¸åŒï¼Œè¿è¡Œå…¬é’¥ï¼Œæ·»åŠ è½¯ä»¶ä»“åº“ã€‚æ‚¨ä½¿ç”¨çš„å‘è¡Œç‰ˆï¼š Ubuntu</p> <p>ä¿¡ä»»Dockerçš„GPGå…¬é’¥: <code>curl -fsSL https://mirrors.huaweicloud.com/docker-ce/linux/ubuntu/gpg | sudo apt-key add -</code></p> <p>å¯¹äºamd64æ¶æ„çš„è®¡ç®—æœºï¼Œæ·»åŠ è½¯ä»¶ä»“åº“: <code>sudo add-apt-repository &quot;deb [arch=amd64] https://mirrors.huaweicloud.com/docker-ce/linux/ubuntu $(lsb_release -cs) stable&quot;</code></p> <p>å¯¹äºæ ‘è“æ´¾æˆ–å…¶å®ƒARMæ¶æ„è®¡ç®—æœºï¼Œè¯·è¿è¡Œ: <code>echo &quot;deb [arch=armhf] https://mirrors.huaweicloud.com/docker-ce/linux/ubuntu $(lsb_release -cs) stable&quot; | sudo tee /etc/apt/sources.list.d/docker.list</code></p> <p>3ã€æ›´æ–°ç´¢å¼•æ–‡ä»¶å¹¶å®‰è£…</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>sudo apt-get update
sudo apt-get install docker-ce
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><hr> <p>æˆ–è€…å¯ä»¥å‚è€ƒæ¸…åTUNAé•œåƒæºè¯´æ˜ï¼šhttps://mirrors.tuna.tsinghua.edu.cn/help/docker-ce/</p> <p>Debian/Ubuntu ç”¨æˆ·</p> <p>ä»¥ä¸‹å†…å®¹æ ¹æ® <a href="https://docs.docker.com/engine/installation/linux/docker-ce/debian/" target="_blank" rel="noopener noreferrer">å®˜æ–¹æ–‡æ¡£<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> ä¿®æ”¹è€Œæ¥ã€‚</p> <p>å¦‚æœä½ è¿‡å»å®‰è£…è¿‡ dockerï¼Œå…ˆåˆ æ‰:</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>sudo apt-get remove docker docker-engine docker.io
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>é¦–å…ˆå®‰è£…ä¾èµ–:</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>sudo apt-get install apt-transport-https ca-certificates curl gnupg2 software-properties-common
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>æ ¹æ®ä½ çš„å‘è¡Œç‰ˆï¼Œä¸‹é¢çš„å†…å®¹æœ‰æ‰€ä¸åŒã€‚ï¼ˆUbuntuï¼‰</p> <p>ä¿¡ä»» Docker çš„ GPG å…¬é’¥:</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo apt-key add -
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>å¯¹äº amd64 æ¶æ„çš„è®¡ç®—æœºï¼Œæ·»åŠ è½¯ä»¶ä»“åº“:</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>sudo add-apt-repository \
   &quot;deb [arch=amd64] https://mirrors.tuna.tsinghua.edu.cn/docker-ce/linux/ubuntu \
   $(lsb_release -cs) \
   stable&quot;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>å¦‚æœä½ æ˜¯æ ‘è“æ´¾æˆ–å…¶å®ƒARMæ¶æ„è®¡ç®—æœºï¼Œè¯·è¿è¡Œ:</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>echo &quot;deb [arch=armhf] https://mirrors.tuna.tsinghua.edu.cn/docker-ce/linux/ubuntu \
     $(lsb_release -cs) stable&quot; | \
    sudo tee /etc/apt/sources.list.d/docker.list
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>æœ€åå®‰è£…</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>sudo apt-get update
sudo apt-get install docker-ce
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="ç¡®ä¿-docker-å·²å‡†å¤‡å°±ç»ª"><a href="#ç¡®ä¿-docker-å·²å‡†å¤‡å°±ç»ª" class="header-anchor">#</a> ç¡®ä¿ Docker å·²å‡†å¤‡å°±ç»ª</h3> <p>docker çš„å…¨éƒ¨æ“ä½œéƒ½è¦åœ¨ root ä¸‹è¿›è¡Œã€‚</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>## docker info
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>å¦‚æœæ²¡æœ‰æŠ¥é”™ï¼Œåˆ™ä½ çš„ Docker å®‰è£…æˆåŠŸäº†ã€‚</p> <h3 id="è¿è¡Œæˆ‘ä»¬çš„ç¬¬ä¸€ä¸ªå®¹å™¨"><a href="#è¿è¡Œæˆ‘ä»¬çš„ç¬¬ä¸€ä¸ªå®¹å™¨" class="header-anchor">#</a> è¿è¡Œæˆ‘ä»¬çš„ç¬¬ä¸€ä¸ªå®¹å™¨</h3> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>docker run -i -t ubuntu /bin/bash
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>ç¬¬ä¸€æ¬¡è¿è¡Œï¼Œæ²¡æœ‰ubuntué•œåƒï¼Œå°†ä¼šä» DockerHub ä¸‹è½½ï¼ˆå¦‚æœä¸‹è½½å¤±è´¥è¯·çœ‹<a href="#docker-hub-%E9%95%9C%E5%83%8F%E9%85%8D%E7%BD%AE">ã€<strong>Docker Hub</strong> <strong>é•œåƒé…ç½®</strong>ã€‘</a>ï¼‰ï¼Œå®Œæˆåä¼šè‡ªåŠ¨ <strong>é™„ç€</strong> åˆ°è¯¥å®¹å™¨é‡Œã€‚</p> <p>åœ¨å®¹å™¨ç¯å¢ƒé‡Œï¼Œè¿è¡Œ ps -aux å¯ä»¥æŸ¥çœ‹å®¹å™¨å®¹å™¨ä¸­è¿è¡Œçš„å…¨éƒ¨è¿›ç¨‹ï¼Œå½“ /bin/bash é€€å‡ºä¹‹åï¼Œå®¹å™¨ä¹Ÿå°±åœæ­¢è¿è¡Œã€‚</p> <p>åœ¨å®¹å™¨é‡Œå¯ä»¥å®‰è£…è½¯ä»¶ï¼Œå› ä¸ºç½‘ç»œé—®é¢˜ï¼ŒåŒæ ·ä¹Ÿéœ€è¦è®¾ç½®é•œåƒã€‚ç„¶è€Œï¼Œå¹¶æ²¡æœ‰è£… vi/vim æ‰€ä»¥æ²¡æ³•ä¿®æ”¹ <code>/etc/apt/sources.list</code> Ïˆ(ï½€âˆ‡Â´)Ïˆ æ‰€ä»¥ï¼Œåˆ°ç½‘ä¸ŠæŸ¥äº†ä¸€ä¼šå„¿ï¼Œæ‰¾åˆ°äº†å¯ä»¥ç”¨ cat é…åˆ echo å†™å…¥æ–‡ä»¶çš„æŠ€å·§ï¼š</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>root@0b38badb7130:~# cat &gt; test.txt &lt;&lt; EOF
&gt; hello
&gt; world!!
&gt; EOF
root@0b38badb7130:~# ls
test.txt
root@0b38badb7130:~# cat test.txt
hello
world!!

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>åˆ©ç”¨è¿™ç§æ–¹æ³•ï¼Œå¯ä»¥è½»æ¾å†™å…¥ sources.listã€‚</p> <p>åœ¨çœ‹é•œåƒç«™çš„æ—¶å€™ï¼Œå‘ç°äº†ä¸€ç§æ›´å¥½çš„æ–¹å¼ï¼Œç›´æ¥æ›¿æ¢ï¼Œéå¸¸å¥½ç”¨ï¼š</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token function">sed</span> -i <span class="token string">&quot;s@http://.*archive.ubuntu.com@http://mirrors.huaweicloud.com@g&quot;</span> /etc/apt/sources.list
<span class="token function">sed</span> -i <span class="token string">&quot;s@http://.*security.ubuntu.com@http://mirrors.huaweicloud.com@g&quot;</span> /etc/apt/sources.list
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>å®‰è£…äº†ä¸€ä¸ª screenfetchï¼ˆ<code>sudo apt install screenfetch</code>ï¼‰ï¼š</p> <p><img src="/assets/img/image-20200805165607951.ecada3b2.png" alt="image-20200805165607951"></p> <p>ä¸€æ—¦è¾“å…¥ exit å‘½ä»¤é€€å‡ºå®¹å™¨ï¼Œå®¹å™¨å°±ä¼šåœæ­¢è¿è¡Œï¼Œå…¶ä¸­çš„æ•°æ®ä¸ä¼šè¢«åˆ é™¤ï¼Œå¯ä»¥é€šè¿‡ <code>docker ps -a</code> æŸ¥çœ‹æ‰€æœ‰çš„é•œåƒ</p> <p><img src="/assets/img/image-20200805165612385.eb10508e.png" alt="image-20200805165612385"></p> <h3 id="å®¹å™¨å‘½å"><a href="#å®¹å™¨å‘½å" class="header-anchor">#</a> å®¹å™¨å‘½å</h3> <p>åŒ…å«ä»¥ä¸‹å­—ç¬¦ï¼šå°å†™å­—æ¯aã€zã€å¤§å†™å­—æ¯A-zã€æ•°å­—0ã€9ã€ä¸‹åˆ’çº¿ã€åœ†ç‚¹ã€æ¨ªçº¿ï¼ˆå¦‚æœç”¨æ­£åˆ™è¡¨è¾¾å¼æ¥è¡¨ç¤ºè¿™äº›ç¬¦å·ï¼Œå°±æ˜¯ <code>[a-zA-Z0-9_.-]</code>ï¼Œå¯ä»¥ç”¨å®¹å™¨å‘½åä»£æ›¿å®¹å™¨idï¼Œå› æ­¤å®¹å™¨å‘½åå¿…é¡»æ˜¯å”¯ä¸€çš„</p> <ul><li><p>å¯åŠ¨æ–°çš„æ—¶å‘½åï¼š<code>docker --name bob_the_container run -i -t ubuntu /bin/bash</code></p></li> <li><p>é‡å‘½åï¼š<code>docker rename 3d0746cf585e bob_the_container</code></p></li> <li><p>æŸ¥çœ‹æœ€åè¿è¡Œçš„å®¹å™¨ï¼š<code>docker ps -l</code></p></li> <li><p>åˆ é™¤å®¹å™¨ï¼š<code>docker rm 3d0746cf585e</code></p></li> <li><p>å¯åŠ¨å®¹å™¨ï¼š<code>docker start bob_the_container</code>ï¼ˆé‡å¯åˆ™æ˜¯ restartï¼‰</p></li></ul> <h3 id="é™„ç€åˆ°å®¹å™¨ä¸Š"><a href="#é™„ç€åˆ°å®¹å™¨ä¸Š" class="header-anchor">#</a> é™„ç€åˆ°å®¹å™¨ä¸Š</h3> <p>ä½¿ç”¨è¿™æ¡å‘½ä»¤å¯ä»¥é™„ç€åˆ°è¿è¡Œä¸­çš„å®¹å™¨ä¸Šï¼š<code>docker attach bob_the_container</code></p> <h3 id="åˆ›å»ºå®ˆæŠ¤å¼å®¹å™¨"><a href="#åˆ›å»ºå®ˆæŠ¤å¼å®¹å™¨" class="header-anchor">#</a> åˆ›å»ºå®ˆæŠ¤å¼å®¹å™¨</h3> <p>ä¸Šé¢æ‰€åˆ›å»ºçš„å®¹å™¨éƒ½æ˜¯äº¤äº’å¼è¿è¡Œçš„å®¹å™¨ï¼Œä¹Ÿå¯ä»¥åˆ›å»ºé•¿æœŸè¿è¡Œçš„å®¹å™¨ï¼Œå«åšå®ˆæŠ¤å¼å®¹å™¨ï¼Œæ²¡æœ‰äº¤äº’å¼ä¼šè¯ï¼Œéå¸¸é€‚åˆè¿è¡Œåº”ç”¨ç¨‹åºå’ŒæœåŠ¡ã€‚</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>docker run --name daemon_dave -d ubuntu /bin/sh -c &quot;while true; do echo hello world; sleep 1; done&quot;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>è¿™æ®µä»£ç åˆ›å»ºä¸€ä¸ªå®ˆæŠ¤å¼å®¹å™¨ï¼Œä½œç”¨æ˜¯æ¯éš”ä¸€ç§’è¾“å‡ºä¸€å¥ hello worldã€‚</p> <p><img src="/assets/img/image-20200805165748820.4213d16c.png" alt="image-20200805165748820"></p> <h3 id="æŸ¥çœ‹å®¹å™¨å†…éƒ¨çš„æ—¥å¿—"><a href="#æŸ¥çœ‹å®¹å™¨å†…éƒ¨çš„æ—¥å¿—" class="header-anchor">#</a> æŸ¥çœ‹å®¹å™¨å†…éƒ¨çš„æ—¥å¿—</h3> <p>ä½¿ç”¨ <code>docker logs -ft daemon_dave</code> æŸ¥çœ‹å®¹å™¨çš„æ—¥å¿—è¾“å‡ºï¼Œå…¶ä¸­ <strong>f</strong> æ˜¯ follow å³å®æ—¶è¾“å‡ºï¼ˆå’Œ tail -f ç±»ä¼¼ï¼‰ï¼Œt æ˜¯æ—¶é—´æˆ³ã€‚</p> <h3 id="æŸ¥çœ‹å®¹å™¨å†…çš„è¿›ç¨‹"><a href="#æŸ¥çœ‹å®¹å™¨å†…çš„è¿›ç¨‹" class="header-anchor">#</a> æŸ¥çœ‹å®¹å™¨å†…çš„è¿›ç¨‹</h3> <div class="language- line-numbers-mode"><pre class="language-text"><code>docker top daemon_dave
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="åœ¨å®¹å™¨å†…éƒ¨è¿è¡Œè¿›ç¨‹-è¿›å…¥å®¹å™¨å†…éƒ¨çš„shell"><a href="#åœ¨å®¹å™¨å†…éƒ¨è¿è¡Œè¿›ç¨‹-è¿›å…¥å®¹å™¨å†…éƒ¨çš„shell" class="header-anchor">#</a> åœ¨å®¹å™¨å†…éƒ¨è¿è¡Œè¿›ç¨‹ï¼ˆè¿›å…¥å®¹å™¨å†…éƒ¨çš„shellï¼‰</h3> <p>æ‰“å¼€shelläº¤äº’å¼ä»»åŠ¡ï¼š</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>sudo docker exec -t -i daemon_dave /bin/bash
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><blockquote><p>-t -i æ ‡å¿—ä¸ºæˆ‘ä»¬çš„è¿›ç¨‹åˆ›å»ºäº†å¯äº¤äº’çš„ TTY</p></blockquote> <p>æ‰§è¡Œä¸€æ¡å‘½ä»¤ï¼Œåˆ›å»ºä¸€ä¸ªç©ºæ–‡ä»¶ï¼š</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>docker exec -d daemon_dave touch /etc/new_config_file
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><blockquote><p>-d è¡¨ç¤ºè¦è¿è¡Œä¸€ä¸ªåå°è¿›ç¨‹</p></blockquote> <p><img src="/assets/img/image-20200805165839601.52ab2b2f.png" alt="image-20200805165839601"></p> <div class="custom-block tip"><p class="custom-block-title">æç¤º</p> <p><strong>æ³¨æ„</strong>ï¼šexecå‘½ä»¤åªèƒ½åœ¨è¿è¡Œä¸­çš„å®¹å™¨ä¸­æ‰§è¡Œï¼ˆå®¹å™¨åœæ­¢åä¸èƒ½ä½¿ç”¨execè¿›å…¥å®¹å™¨ï¼‰ï¼Œå¦‚æœå®¹å™¨å§‹ç»ˆæ— æ³•å¯åŠ¨ï¼ˆæ¯”å¦‚é…ç½®æœ‰è¯¯ï¼‰ï¼Œå¯ä½¿ç”¨ <code>docker run -it --name &lt;å®¹å™¨å&gt; &lt;é•œåƒå&gt; sh</code> çš„æ–¹æ³•è¿›å…¥å®¹å™¨è°ƒè¯•ã€‚</p></div> <h3 id="è‡ªåŠ¨é‡å¯å®¹å™¨"><a href="#è‡ªåŠ¨é‡å¯å®¹å™¨" class="header-anchor">#</a> è‡ªåŠ¨é‡å¯å®¹å™¨</h3> <p>æ·»åŠ  --restart æ ‡å¿—ï¼Œåœ¨æœåŠ¡å™¨å¯åŠ¨æ—¶è®©dockerè‡ªåŠ¨å¯åŠ¨å®¹å™¨ã€‚</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>docker run --restart=always --name daemon_dave -d ubuntu /bin/sh -c &quot;while true; do echo hello world; sleep 1; done&quot;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><code>--restart=on-faliure:5</code> æ„æ€æ˜¯åªåœ¨å®¹å™¨é€€å‡ºä»£ç ä¸ºé0æ—¶æ‰ä¼šè‡ªåŠ¨é‡å¯ï¼Œæœ€å¤šé‡å¯5æ¬¡</p> <p>è¦ä¿®æ”¹ä¸€ä¸ªå·²ç»å¯åŠ¨çš„å®¹å™¨ï¼Œä½¿ç”¨å‘½ä»¤ï¼š<code>docker update --restart=always my-container</code></p> <p>è¦å…³é—­è‡ªåŠ¨å¯åŠ¨ï¼Œä½¿ç”¨ <code>--restart=no</code> é€‰é¡¹ã€‚</p> <h3 id="æ·±å…¥å®¹å™¨"><a href="#æ·±å…¥å®¹å™¨" class="header-anchor">#</a> æ·±å…¥å®¹å™¨</h3> <p>ä½¿ç”¨ <code>docker inspect daemon_dave</code> å‘½ä»¤ï¼Œå¯ä»¥è¾“å‡ºå¤§é‡å®¹å™¨ä¿¡æ¯ã€‚</p> <p>ä¹Ÿå¯ä»¥æ·»åŠ  --format å‚æ•°ä»¥æ˜¾ç¤ºæŒ‡å®šçš„ä¿¡æ¯ï¼š</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>docker inspect --format<span class="token operator">=</span><span class="token string">'{{ .State.Running }}'</span> daemon_dave
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>--format éå¸¸å¼ºå¤§ï¼Œå…¶æ”¯æŒå®Œæ•´çš„ Go è¯­è¨€æ¨¡æ¿</p> <h3 id="åˆ é™¤å®¹å™¨"><a href="#åˆ é™¤å®¹å™¨" class="header-anchor">#</a> åˆ é™¤å®¹å™¨</h3> <p>ä¸ä»…å¯ä»¥ä½¿ç”¨ <code>docker rm daemon_dave</code> æ¥åˆ é™¤å®¹å™¨ï¼Œè¿˜å¯ä»¥ç”¨è¿™æ¡å‘½ä»¤æ¥åˆ é™¤æ‰€æœ‰å®¹å™¨ï¼š</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token comment">## åˆ é™¤æ‰€æœ‰å®¹å™¨ï¼ˆå±ï¼‰</span>
docker <span class="token function">rm</span> <span class="token variable"><span class="token variable">`</span>docker <span class="token function">ps</span> -a -q<span class="token variable">`</span></span>

<span class="token comment">## åˆ é™¤å¼‚å¸¸åœæ­¢çš„å®¹å™¨ï¼ˆæ…ç”¨ï¼‰</span>
docker <span class="token function">rm</span> <span class="token variable"><span class="token variable">`</span>docker <span class="token function">ps</span> -a <span class="token operator">|</span> <span class="token function">grep</span> Exited <span class="token operator">|</span> <span class="token function">awk</span> <span class="token string">'{print $1}'</span><span class="token variable">`</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h2 id="docker-hub-é•œåƒé…ç½®"><a href="#docker-hub-é•œåƒé…ç½®" class="header-anchor">#</a> Docker Hub é•œåƒé…ç½®</h2> <p>å›½å†…è¦è®¾ç½® Docker Hub çš„é•œåƒæºï¼Œå¦åˆ™å¯èƒ½ä¸‹è½½å¤±è´¥ã€‚</p> <p>ç¼–è¾‘ /etc/docker/daemon.json æ–‡ä»¶ï¼ˆä¸å­˜åœ¨åˆ™æ–°å»ºï¼‰ï¼Œå†…å®¹å¦‚ä¸‹ï¼š</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>{
    &quot;registry-mirrors&quot;: [&quot;https://hub-mirror.c.163.com/&quot;]
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>ç„¶åé‡å¯ docker æœåŠ¡ï¼š</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>sudo systemctl daemon-reload
sudo systemctl restart docker  
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>å‘½ä»¤è¡Œæ‰§è¡Œ docker infoï¼Œå¦‚æœä»ç»“æœä¸­çœ‹åˆ°äº†å¦‚ä¸‹å†…å®¹ï¼Œè¯´æ˜é…ç½®æˆåŠŸã€‚</p> <p><img src="data:image/png;base64,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" alt="image-20200805170416786"></p> <p>æ›´å¤šé•œåƒåˆ—è¡¨ï¼š</p> <table><thead><tr><th><strong>é•œåƒåŠ é€Ÿå™¨</strong></th> <th><strong>é•œåƒåŠ é€Ÿå™¨åœ°å€</strong></th> <th>ä¸“å±åŠ é€Ÿå™¨</th> <th>å…¶å®ƒåŠ é€Ÿ</th></tr></thead> <tbody><tr><td><a href="https://docker-cn.com/registry-mirror" target="_blank" rel="noopener noreferrer">Docker ä¸­å›½å®˜æ–¹é•œåƒ<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></td> <td>https://registry.docker-cn.com</td> <td></td> <td>Docker Hub</td></tr> <tr><td><a href="https://daocloud.io/mirror" target="_blank" rel="noopener noreferrer">DaoCloud é•œåƒç«™<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></td> <td>http://f1361db2.m.daocloud.io</td> <td>å¯ç™»å½•ï¼Œç³»ç»Ÿåˆ†é…</td> <td>Docker Hub</td></tr> <tr><td><a href="https://github.com/Azure/container-service-for-azure-china/blob/master/aks/README.md#22-container-registry-proxy" target="_blank" rel="noopener noreferrer">Azure   ä¸­å›½é•œåƒ<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></td> <td>https://dockerhub.azk8s.cn</td> <td></td> <td>Docker Hubã€GCRã€Quay</td></tr> <tr><td><a href="https://mirrors.ustc.edu.cn/help/dockerhub.html" target="_blank" rel="noopener noreferrer">ç§‘å¤§é•œåƒç«™<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></td> <td>https://docker.mirrors.ustc.edu.cn</td> <td></td> <td>Docker Hubã€<a href="https://github.com/ustclug/mirrorrequest/issues/91" target="_blank" rel="noopener noreferrer">GCR<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>ã€<a href="https://github.com/ustclug/mirrorrequest/issues/135" target="_blank" rel="noopener noreferrer">Quay<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></td></tr> <tr><td><a href="https://cr.console.aliyun.com" target="_blank" rel="noopener noreferrer">é˜¿é‡Œäº‘<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></td> <td>https://&lt;your_code&gt;.mirror.aliyuncs.com</td> <td>éœ€ç™»å½•ï¼Œç³»ç»Ÿåˆ†é…</td> <td>Docker Hub</td></tr> <tr><td><a href="https://kirk-enterprise.github.io/hub-docs/#/user-guide/mirror" target="_blank" rel="noopener noreferrer">ä¸ƒç‰›äº‘<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></td> <td>https://reg-mirror.qiniu.com</td> <td></td> <td>Docker Hubã€GCRã€Quay</td></tr> <tr><td><a href="https://c.163yun.com/hub" target="_blank" rel="noopener noreferrer">ç½‘æ˜“äº‘<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></td> <td>https://hub-mirror.c.163.com</td> <td></td> <td>Docker Hub</td></tr> <tr><td><a href="https://cloud.tencent.com/document/product/457/9113" target="_blank" rel="noopener noreferrer">è…¾è®¯äº‘<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></td> <td>https://mirror.ccs.tencentyun.com</td> <td></td> <td>Docker Hub</td></tr></tbody></table> <h2 id="ä½¿ç”¨-docker-é•œåƒå’Œä»“åº“"><a href="#ä½¿ç”¨-docker-é•œåƒå’Œä»“åº“" class="header-anchor">#</a> ä½¿ç”¨ Docker é•œåƒå’Œä»“åº“</h2> <h3 id="ä»€ä¹ˆæ˜¯-docker-é•œåƒ"><a href="#ä»€ä¹ˆæ˜¯-docker-é•œåƒ" class="header-anchor">#</a> ä»€ä¹ˆæ˜¯ Docker é•œåƒ</h3> <p>docker é•œåƒæ˜¯åˆ†å±‚çš„ï¼Œåˆ©ç”¨äº†å†™æ—¶å¤åˆ¶æœºåˆ¶ï¼Œä¸Šé¢çš„å±‚ä¸ä¼šå½±å“ä¸‹é¢çš„å±‚ã€‚</p> <p><img src="/assets/img/image-20200805170553260.c81a87cb.png" alt="image-20200805170553260"></p> <h3 id="åˆ—å‡ºé•œåƒ"><a href="#åˆ—å‡ºé•œåƒ" class="header-anchor">#</a> åˆ—å‡ºé•œåƒ</h3> <p>ä½¿ç”¨ <code>docker images</code> åˆ—å‡ºæœ¬åœ°çš„ Docker é•œåƒï¼ˆä½¿ç”¨ docker ps åˆ—å‡ºå®¹å™¨ï¼‰</p> <p><img src="/assets/img/image-20200805170604434.96e87476.png" alt="image-20200805170604434"></p> <p>DockerHubï¼šhttps://hub.docker.com/search?q=&amp;type=image</p> <p>ç›¸åŒé•œåƒç”¨ä¸åŒçš„ tag æ¥åŒºåˆ†ç‰ˆæœ¬ï¼Œå¦‚æœéœ€è¦å®‰è£…æŒ‡å®šçš„ tagï¼Œå¯ä»¥åœ¨ä»“åº“ååé¢åŠ ä¸Šä¸€ä¸ªå†’å·å’Œæ ‡ç­¾åæ¥æŒ‡å®šï¼š</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>docker run -t -i --name new_container ubuntu:12.04 /bin/bash
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><img src="/assets/img/image-20200805170616412.2ca4e75f.png" alt="image-20200805170616412"></p> <h3 id="æ‹‰å–é•œåƒ"><a href="#æ‹‰å–é•œåƒ" class="header-anchor">#</a> æ‹‰å–é•œåƒ</h3> <p>å¦‚æœæœ¬åœ°å®¿ä¸»æœºä¸Šæ²¡æœ‰é•œåƒï¼ŒDocker ä¼šè‡ªåŠ¨ä» Docker Hub ä¸‹è½½ï¼Œå¦‚æœæƒ³æ‰‹åŠ¨æ‹‰å–ï¼Œå¯ä»¥ä½¿ç”¨ pull å‘½ä»¤ï¼š</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>docker pull fedora
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="æŸ¥æ‰¾é•œåƒ"><a href="#æŸ¥æ‰¾é•œåƒ" class="header-anchor">#</a> æŸ¥æ‰¾é•œåƒ</h3> <p>ä½¿ç”¨ <code>docker search</code> å‘½ä»¤æ¥æŸ¥æ‰¾æ‰€æœ‰å…¬å¼€çš„é•œåƒï¼š</p> <p><img src="/assets/img/image-20200805170641397.6caa66c0.png" alt="image-20200805170641397"></p> <p>ç„¶åè¿è¡Œ <code>docker run -i -t node /bin/bash</code> å°±å¯ä»¥å¯åŠ¨è¯¥é•œåƒ</p> <h3 id="æ„å»ºé•œåƒ"><a href="#æ„å»ºé•œåƒ" class="header-anchor">#</a> æ„å»ºé•œåƒ</h3> <p>è¦æ„å»ºè‡ªå·±çš„é•œåƒï¼Œé¦–å…ˆè¦æ³¨å†Œä¸€ä¸ª <a href="https://hub.docker.com/" target="_blank" rel="noopener noreferrer">Docker Hub<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> è´¦å·ï¼Œæˆ‘çš„è´¦å·åæ˜¯ canwdev</p> <h3 id="ç”¨-commit-å‘½ä»¤åˆ›å»ºé•œåƒ"><a href="#ç”¨-commit-å‘½ä»¤åˆ›å»ºé•œåƒ" class="header-anchor">#</a> ç”¨ commit å‘½ä»¤åˆ›å»ºé•œåƒ</h3> <p>æˆ‘ä»¬ä½¿ç”¨ä¹‹å‰åˆ›å»ºçš„é•œåƒï¼Œåä¸º bob_the_containerã€‚å’Œ git å¾ˆåƒï¼Œä½¿ç”¨ commit å‘½ä»¤æ¥æäº¤ä¿®æ”¹ï¼š</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>docker commit bob_the_container canwdev/screenfetch
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>æŸ¥çœ‹åˆšåˆšåˆ›å»ºçš„é•œåƒï¼š</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>docker images canwdev/screenfetch
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><img src="/assets/img/image-20200805170707637.a9dc9cdf.png" alt="image-20200805170707637"></p> <p>å¯ä»¥ä½¿ç”¨æ›´å¤æ‚çš„å‘½ä»¤ï¼š</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>docker commit -m=&quot;A new custom image&quot; --author=&quot;canwdev&quot; bob_the_container canwdev/screenfetch:test1
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ul><li><code>-m=&quot;A new custom image&quot;</code> æäº¤è¯´æ˜</li> <li><code>--author=&quot;canwdev&quot;</code> ä½œè€…</li> <li><code>:test1</code> æ ‡ç­¾</li></ul> <p>è¿è¡Œå®¹å™¨ï¼š<code>docker run -t -i canwdev/screenfetch:test1 /bin/bash</code></p> <p><img src="/assets/img/image-20200805170814286.93935930.png" alt="image-20200805170814286"></p> <h3 id="ç”¨-dockerfile-æ„å»ºé•œåƒ"><a href="#ç”¨-dockerfile-æ„å»ºé•œåƒ" class="header-anchor">#</a> ç”¨ Dockerfile æ„å»ºé•œåƒ</h3> <p>å¹¶ä¸æ¨èä½¿ç”¨ docker commit çš„æ–¹å¼æ„å»ºé•œåƒï¼Œæ¨èä½¿ç”¨ Dockerfileã€‚</p> <p>åˆ›å»ºä¸€ä¸ª Dockerfileï¼ˆç©ºæ–‡ä»¶ï¼‰ï¼š</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>root@mint-virtual-machine:/home/mint# mkdir static_web
root@mint-virtual-machine:/home/mint# cd static_web/
root@mint-virtual-machine:/home/mint/static_web# touch Dockerfile
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>æ¨èä½¿ç”¨VSCode Remote + Docker æ’ä»¶æ¥å®Œæˆç¼–è¾‘ï¼š</p> <p><img src="/assets/img/image-20200805170840931.64beacf8.png" alt="image-20200805170840931"></p> <p>åœ¨æ–‡ä»¶ä¸­å†™å…¥ä»¥ä¸‹ä»£ç ï¼š</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>## Version: 0.0.1
FROM ubuntu:14.04
LABEL maintainer=&quot;canwdev&quot;
RUN sed -i &quot;s@http://.*archive.ubuntu.com@http://mirrors.huaweicloud.com@g&quot; /etc/apt/sources.list
RUN sed -i &quot;s@http://.*security.ubuntu.com@http://mirrors.huaweicloud.com@g&quot; /etc/apt/sources.list
RUN apt-get update
RUN apt-get install -y nginx
RUN echo 'Hi, I am in your container' \
    &gt;/usr/share/nginx/html/index.html
EXPOSE 80
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>å½“ç„¶ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨é˜¿é‡Œäº‘é•œåƒï¼š<code>sudo sed -i 's/archive.ubuntu.com/mirrors.aliyun.com/g' /etc/apt/sources.list</code></p> <h3 id="åŸºäº-dockerfile-æ„å»ºæ–°é•œåƒ"><a href="#åŸºäº-dockerfile-æ„å»ºæ–°é•œåƒ" class="header-anchor">#</a> åŸºäº Dockerfile æ„å»ºæ–°é•œåƒ</h3> <div class="language- line-numbers-mode"><pre class="language-text"><code>cd static_web/
docker build -t=&quot;canwdev/static_web:v1&quot; .
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><img src="/assets/img/image-20200805170919060.e50807e9.png" alt="image-20200805170919060"></p> <p>æ„å»ºæˆåŠŸï¼</p> <h3 id="æ„å»ºæŒ‡ä»¤å¤±è´¥äº†ä¼šæ€ä¹ˆæ ·"><a href="#æ„å»ºæŒ‡ä»¤å¤±è´¥äº†ä¼šæ€ä¹ˆæ ·" class="header-anchor">#</a> æ„å»ºæŒ‡ä»¤å¤±è´¥äº†ä¼šæ€ä¹ˆæ ·</h3> <p><img src="/assets/img/image-20200805170931944.5a773b7f.png" alt="image-20200805170931944"></p> <p>æ­¤æ—¶ï¼Œå¯ä»¥ä½¿ç”¨ <code>docker ps -a</code> é…åˆ <code>docker run -t -i c6c2d0078e38 /bin/bash</code> è¿›å…¥åˆ°å®¹å™¨å†…éƒ¨è¿›è¡Œè°ƒè¯•ï¼Œè¯¥å®¹å™¨çš„çŠ¶æ€æ˜¯è¿™æ¬¡æ„å»ºåˆ°ç›®å‰ä¸ºæ­¢å·²ç»æˆåŠŸçš„æœ€åä¸€æ­¥ã€‚</p> <p>å¦‚æœä¸Šæ¬¡æœ‰æ„å»ºï¼Œåˆ™ä¼šå­˜åœ¨æ„å»ºç¼“å­˜ã€‚å¦‚æœä¸æƒ³è¦è¿™ä¸ªç¼“å­˜ï¼Œå¯ä»¥ä½¿ç”¨ --no-cache å‘½ä»¤åœ¨æ„å»ºæ—¶å…³é—­ç¼“å­˜ï¼š</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>docker build --no-cache -t=&quot;canwdev/static_web&quot; .
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>æ›´æ–°æ„å»ºç¼“å­˜çš„å¦ä¸€ç§æ–¹å¼ï¼š</p> <p><img src="/assets/img/image-20200805170953270.838daaf7.png" alt="image-20200805170953270"></p> <p>é€šè¿‡ ENV è®¾ç½®ä¸€ä¸ªç¯å¢ƒå˜é‡ï¼Œå¦‚æœæƒ³åˆ·æ–°ä¸€ä¸ªæ„å»ºï¼Œç§©åºä¿®æ”¹ REFRESHED_AT ç¯å¢ƒå˜é‡çš„æ—¥æœŸå³å¯ã€‚</p> <h3 id="æŸ¥çœ‹æ–°é•œåƒ"><a href="#æŸ¥çœ‹æ–°é•œåƒ" class="header-anchor">#</a> æŸ¥çœ‹æ–°é•œåƒ</h3> <p>ä½¿ç”¨ docker imagesï¼š</p> <p><img src="/assets/img/image-20200805171005432.c55ccc7f.png" alt="image-20200805171005432"></p> <p>ä½¿ç”¨ docker history å¯ä»¥çœ‹åˆ°æ„å»ºé•œåƒçš„æ¯ä¸€å±‚å’ŒæŒ‡ä»¤ï¼š</p> <p><img src="/assets/img/image-20200805171010603.861ce5e8.png" alt="image-20200805171010603"></p> <h3 id="ä»æ–°é•œåƒå¯åŠ¨å®¹å™¨"><a href="#ä»æ–°é•œåƒå¯åŠ¨å®¹å™¨" class="header-anchor">#</a> ä»æ–°é•œåƒå¯åŠ¨å®¹å™¨</h3> <div class="language- line-numbers-mode"><pre class="language-text"><code>docker run -d -p 80 --name static_web canwdev/static_web nginx -g &quot;daemon off;&quot;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><img src="/assets/img/image-20200805171027802.419e77fe.png" alt="image-20200805171027802"></p> <p><img src="/assets/img/image-20200805171030667.22fb7e99.png" alt="image-20200805171030667"></p> <p>ä½¿ç”¨ docker port æŸ¥çœ‹ç«¯å£æ˜ å°„æƒ…å†µï¼š</p> <p><img src="/assets/img/image-20200805171040281.d716090a.png" alt="image-20200805171040281"></p> <p>æ›´å®ç”¨çš„ç«¯å£ç»‘å®šæ–¹å¼ï¼Œå°†å®¹å™¨80ç«¯å£æ˜ å°„åˆ°å®¿ä¸»æœºæŒ‡å®šç«¯å£ï¼ˆ8080ï¼‰ï¼š</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>docker run -d -p 8080:80 --name static_web canwdev/static_web nginx -g &quot;daemon off;&quot;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><img src="/assets/img/image-20200805171049756.2ac68c7b.png" alt="image-20200805171049756"></p> <h3 id="dockerfile-æŒ‡ä»¤"><a href="#dockerfile-æŒ‡ä»¤" class="header-anchor">#</a> Dockerfile æŒ‡ä»¤</h3> <p><strong>CMD</strong> å‘½ä»¤æŒ‡å®šä¸€è´¯å®¹å™¨å¯åŠ¨æ—¶è¦è¿è¡Œçš„å‘½ä»¤ï¼Œ<strong>ENTRYPOINT</strong> å‘½ä»¤å’Œå®ƒç›¸ä¼¼ã€‚</p> <p>å†™æ³•å¦‚ä¸‹ï¼Œæ¯ä¸ª Dockerfile ä¸­åªèƒ½æŒ‡å®šä¸€æ¡ CMD æŒ‡ä»¤ï¼š</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>CMD [&quot;/bin/bash&quot;, &quot;-l&quot;]
CMD [&quot;./frps&quot;,&quot;-c&quot;,&quot;./frps.ini&quot;]
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><div class="language- line-numbers-mode"><pre class="language-text"><code>ENTRYPOINT [&quot;/usr/sbin/nginx&quot;, &quot;-g&quot;, &quot;daemon off;&quot;]
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>CMD å’Œ ENTRYPOINT çš„åŒºåˆ«æ˜¯ï¼šCMD å‘½ä»¤ä¼šè¢« docker run åé¢è¿½åŠ çš„å‘½ä»¤è¦†ç›–ï¼Œè€Œ ENTRYPOINT ä¸ä¼šã€‚</p> <p><strong>WORKDIR</strong> æŒ‡ä»¤ç”¨æ¥åœ¨ä»é•œåƒåˆ›å»ºä¸€ä¸ªæ–°å®¹å™¨æ—¶ï¼Œåœ¨å®¹å™¨å†…éƒ¨è®¾ç½®ä¸€ä¸ªå·¥ä½œç›®å½•ï¼ŒENTRYPOINT å’Œ/æˆ– CMD æŒ‡å®šçš„ç¨‹åºä¼šåœ¨è¿™ä¸ªç›®å½•ä¸‹æ‰§è¡Œã€‚</p> <p><img src="/assets/img/image-20200805171128176.cdbfea8b.png" alt="image-20200805171128176"></p> <p><strong>ENV</strong> ç”¨æ¥åœ¨é•œåƒæ„å»ºè¿‡ç¨‹ä¸­è®¾å®šç¯å¢ƒå˜é‡ã€‚</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>ENV RVM_PATH /home/rvm
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><strong>USER</strong> æŒ‡ä»¤ç”¨æ¥æŒ‡å®šè¯¥é•œåƒä¼šä»¥ä»€ä¹ˆæ ·çš„ç”¨æˆ·å»è¿è¡Œï¼Œå¦‚æœæ€•ä¸è®¾å®šï¼Œé»˜è®¤ç”¨æˆ·ä¸º rootã€‚</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>USER nginx
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><img src="/assets/img/image-20200805171159760.d261d6b5.png" alt="image-20200805171159760"></p> <p><strong>ADD</strong> æŒ‡ä»¤ç”¨æ¥å°†æ„å»ºç¯å¢ƒä¸‹çš„æ–‡ä»¶å’Œç›®å½•å¤åˆ¶åˆ°é•œåƒä¸­ï¼Œå¯¹äºå½’æ¡£æ–‡ä»¶ï¼ˆtar.gzï¼‰å¯ä»¥è‡ªåŠ¨è§£å‹ã€‚</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>ENV FRP_NAME frp_0.33.0_linux_amd64
ADD ${FRP_NAME}.tar.gz /frp/
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><strong>COPY</strong> æŒ‡ä»¤éå¸¸ç±»ä¼¼äºADDï¼Œå®ƒä»¬æ ¹æœ¬çš„ä¸åŒæ˜¯COPYåªå…³å¿ƒåœ¨æ„å»ºä¸Šä¸‹æ–‡ä¸­å¤åˆ¶æœ¬åœ°æ–‡ä»¶ï¼Œè€Œä¸ä¼šå»åšæ–‡ä»¶æå–ï¼ˆextractionï¼‰å’Œè§£å‹ï¼ˆdecompressionï¼‰çš„å·¥ä½œã€‚</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>ADD software.lic /opt/application/software.lic
ADD http://wordpress.org/latest.zip /root/wordpress.zip
## è¿™æ¡ä¼šè‡ªåŠ¨è§£å‹ï¼š
ADD latest.tar.gz /var/www/wordpress/
COPY conf.d/ /etc/apache2/
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>å¯¹äºä¸å­˜åœ¨çš„æ–‡ä»¶å¤¹ï¼Œä¼šè‡ªåŠ¨åˆ›å»ºï¼ˆç±»ä¼¼äº mkdir -pï¼‰ã€‚</p> <p><strong>ONBUILD</strong> æŒ‡ä»¤ä¼šç´§è·ŸFROMä¹‹åæ‰§è¡Œã€‚ONPUILDæŒ‡ä»¤èƒ½ä¸ºé•œåƒæ·»åŠ è§¦å‘å™¨(tngger)ã€‚å½“ä¸€ä¸ªé•œåƒè¢«ç”¨åšå…¶ä»–é•œåƒçš„åŸºç¡€é•œåƒæ—¶ï¼ˆæ¯”å¦‚ä½ çš„é•œåƒéœ€è¦ä»æŸæœªå‡†å„å¥½çš„ä½ç½®æ·»åŠ æºä»£ç ï¼Œæˆ–è€…ä½ éœ€è¦æ‰§è¡Œç‰¹å®šäºæ„å»ºé•œåƒçš„ç¯å¢ƒçš„æ„å»ºè„šæœ¬ï¼‰ï¼Œè¯¥é•œåƒä¸­çš„è§¦å‘å™¨å°†ä¼šè¢«æ‰§è¡Œã€‚</p> <p>è§¦å‘å™¨å¯ä»¥æ˜¯ä»»ä½•æ„å»ºæŒ‡ä»¤ï¼š</p> <p><img src="/assets/img/image-20200805171345703.83e86bd8.png" alt="image-20200805171345703"></p> <h3 id="å°†é•œåƒæ¨é€åˆ°-dockerhub"><a href="#å°†é•œåƒæ¨é€åˆ°-dockerhub" class="header-anchor">#</a> å°†é•œåƒæ¨é€åˆ° DockerHub</h3> <div class="language- line-numbers-mode"><pre class="language-text"><code>docker push canwdev/static_web
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><img src="/assets/img/image-20200805171358771.c5c44288.png" alt="image-20200805171358771"></p> <p>å¯ä»¥çœ‹åˆ°ä¸Šä¼ é•œåƒåˆ° DockerHub è¿˜æ˜¯å¾ˆæ…¢çš„ï¼Œæ‰€ä»¥åœ¨å›½å†…å»ºè®®è‡ªå·±æ­å»º Docker Registryã€‚</p> <p>å‘å¸ƒæˆåŠŸï¼š</p> <p><img src="/assets/img/image-20200805171408012.83edc7ef.png" alt="image-20200805171408012"></p> <h3 id="åˆ é™¤é•œåƒ"><a href="#åˆ é™¤é•œåƒ" class="header-anchor">#</a> åˆ é™¤é•œåƒ</h3> <p>ä½¿ç”¨ <code>docker rmi</code> æ¥åˆ é™¤é•œåƒï¼š<code>docker rmi canwdev/screenfetch</code></p> <blockquote><p>å’Œ <code>docker rm</code> ç”¨æ³•ç›¸ä¼¼ï¼ŒåŒºåˆ«æ˜¯ rm æ˜¯åˆ é™¤å®¹å™¨è€Œ rmi æ˜¯åˆ é™¤é•œåƒã€‚</p></blockquote> <p>æ¸…ç†ï¼š</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token comment"># åˆ é™¤åç§°æˆ–æ ‡ç­¾ä¸º`&lt;none&gt;`çš„é•œåƒï¼š</span>
docker rmi -f <span class="token variable"><span class="token variable">`</span>docker images <span class="token operator">|</span> <span class="token function">grep</span> <span class="token string">'&lt;none&gt;'</span> <span class="token operator">|</span> <span class="token function">awk</span> <span class="token string">'{print $3}'</span><span class="token variable">`</span></span>

<span class="token comment"># è‡ªåŠ¨æ¸…ç†å‘½ä»¤</span>
<span class="token comment"># -a ä¸€å¹¶æ¸…é™¤æ‰€æœ‰æœªè¢«ä½¿ç”¨çš„é•œåƒå’Œæ‚¬ç©ºé•œåƒ</span>
<span class="token comment"># -f ç”¨ä»¥å¼ºåˆ¶åˆ é™¤ï¼Œä¸æç¤ºä¿¡æ¯</span>
docker system prune
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h2 id="åœ¨æµ‹è¯•ä¸­ä½¿ç”¨docker"><a href="#åœ¨æµ‹è¯•ä¸­ä½¿ç”¨docker" class="header-anchor">#</a> åœ¨æµ‹è¯•ä¸­ä½¿ç”¨Docker</h2> <h3 id="ä½¿ç”¨dockeræµ‹è¯•é™æ€ç½‘ç«™"><a href="#ä½¿ç”¨dockeræµ‹è¯•é™æ€ç½‘ç«™" class="header-anchor">#</a> ä½¿ç”¨Dockeræµ‹è¯•é™æ€ç½‘ç«™</h3> <p>é¡¹ç›®ä»£ç ï¼šhttps://gitee.com/canwdev/learn-docker/tree/master/nginx-web</p> <p>nginx-webé¡¹ç›®ç»“æ„å¦‚ä¸‹ï¼š</p> <p><img src="/assets/img/image-20200805171439575.ea833e08.png" alt="image-20200805171439575"></p> <p>æ„å»ºé•œåƒï¼š<code>docker build -t canwdev/nginx .</code></p> <h3 id="ä»nginx-webé¡¹ç›®å’Œnginxé•œåƒæ„å»ºå®¹å™¨"><a href="#ä»nginx-webé¡¹ç›®å’Œnginxé•œåƒæ„å»ºå®¹å™¨" class="header-anchor">#</a> ä»nginx-webé¡¹ç›®å’Œnginxé•œåƒæ„å»ºå®¹å™¨</h3> <div class="language- line-numbers-mode"><pre class="language-text"><code>docker run -d -p 80 --name nginx_web -v $PWD/website:/var/www/html/website canwdev/nginx nginx
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><img src="/assets/img/image-20200805171501835.7f4ecba3.png" alt="image-20200805171501835"></p> <p>ä¹Ÿå¯ä»¥åœ¨â€œå®¹å™¨å†…è·¯å¾„â€ååŠ ä¸Š <code>:ro</code> è¡¨ç¤ºæŒ‚è½½çš„ç›®å½•æ˜¯åªè¯»çš„ã€‚</p> <p>åœ¨å®¿ä¸»æœºæ‰“å¼€å¯¹åº”ç«¯å£çš„ç½‘é¡µï¼Œæ•ˆæœå¦‚ä¸‹ï¼š</p> <p><img src="/assets/img/image-20200805171514464.234d4ee8.png" alt="image-20200805171514464"></p> <h3 id="ä»dockerå®‰è£…-gitea"><a href="#ä»dockerå®‰è£…-gitea" class="header-anchor">#</a> * ä»Dockerå®‰è£… Gitea</h3> <p>æˆ‘ä»¬åœ¨ Docker Hub çš„ Gitea ç»„ç»‡ä¸­æä¾›äº†è‡ªåŠ¨æ›´æ–°çš„ Docker é•œåƒï¼Œå®ƒä¼šä¿æŒæœ€æ–°çš„ç¨³å®šç‰ˆã€‚ä½ ä¹Ÿå¯ä»¥ç”¨å…¶å®ƒ Docker æœåŠ¡æ¥æ›´æ–°ã€‚é¦–å…ˆä½ éœ€è¦pullé•œåƒï¼š</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>docker pull gitea/gitea:latest
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>å¦‚æœè¦å°†gitå’Œå…¶å®ƒæ•°æ®æŒä¹…åŒ–ï¼Œä½ éœ€è¦åˆ›å»ºä¸€ä¸ªç›®å½•æ¥ä½œä¸ºæ•°æ®å­˜å‚¨çš„åœ°æ–¹ï¼š</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>sudo mkdir -p /var/lib/gitea
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>ç„¶åå°±å¯ä»¥è¿è¡Œ docker å®¹å™¨äº†ï¼Œè¿™å¾ˆç®€å•ã€‚ å½“ç„¶ä½ éœ€è¦å®šä¹‰ç«¯å£æ•°æ•°æ®ç›®å½•ï¼š</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>docker run -d --name=gitea -p 10022:22 -p 10080:3000 -v /var/lib/gitea:/data gitea/gitea:latest
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>ç„¶å å®¹å™¨å·²ç»è¿è¡ŒæˆåŠŸï¼Œåœ¨æµè§ˆå™¨ä¸­è®¿é—® http://hostname:10080 å°±å¯ä»¥çœ‹åˆ°ç•Œé¢äº†ã€‚ä½ å¯ä»¥å°è¯•åœ¨ä¸Šé¢åˆ›å»ºé¡¹ç›®ï¼Œcloneæ“ä½œ <code>git clone ssh://git@hostname:10022/username/repo.git.</code></p> <p>æ³¨æ„ï¼šç›®å‰ç«¯å£æ”¹ä¸ºé3000æ—¶ï¼Œéœ€è¦ä¿®æ”¹é…ç½®æ–‡ä»¶ <code>LOCAL_ROOT_URL = http://localhost:3000/</code>ã€‚</p> <h3 id="æ„å»ºsinatraåº”ç”¨ç¨‹åº"><a href="#æ„å»ºsinatraåº”ç”¨ç¨‹åº" class="header-anchor">#</a> æ„å»ºSinatraåº”ç”¨ç¨‹åº</h3> <p><img src="/assets/img/image-20200805171900547.ccee687d.png" alt="image-20200805171900547"></p> <p>åˆ° https://gitee.com/canwdev/learn-docker/tree/master/sinatra/webapp ä¸‹è½½æºä»£ç ç„¶åcdåˆ° learn-docker/ sinatra / webappç›®å½•ï¼Œè¿è¡Œ <code>docker build -t canwdev/sinatra .</code></p> <p>è´¹å°½å‘¨æŠ˜ï¼Œç»ˆäºè·‘èµ·æ¥äº†ï¼š<code>docker run -d -p 4567 --name sinatra_app -v $PWD:/opt/webapp canwdev/sinatra</code></p> <p><code>-p 4567</code> ä»£è¡¨å…¬å¼€å®¹å™¨ä¸­çš„4567ç«¯å£</p> <p><img src="/assets/img/image-20200805171927006.591a12f4.png" alt="image-20200805171927006"></p> <p>æŸ¥çœ‹æœ€æ–°æ—¥å¿—ï¼š<code>docker logs -ft sinatra_app</code></p> <p>æŸ¥çœ‹å®¹å™¨å†…çš„è¿›ç¨‹ï¼š<code>docker top sinatra_app</code></p> <p>æŸ¥çœ‹å®¹å™¨å†…çš„4567ç«¯å£è¢«æ˜ å°„åˆ°å®¿ä¸»æœºçš„å“ªä¸ªç«¯å£ï¼š<code>docker port sinatra_app 4567</code></p> <p>ç”¨curlå‘½ä»¤æµ‹è¯•sinatraæœåŠ¡ï¼š<code>curl -i -H 'Accept: application/json' -d 'name=Foo&amp;status=Bar' http://localhost:32771/json</code></p> <p><img src="/assets/img/image-20200805171954194.f23f430f.png" alt="image-20200805171954194"></p> <h3 id="æ„å»ºredisé•œåƒå’Œå®¹å™¨"><a href="#æ„å»ºredisé•œåƒå’Œå®¹å™¨" class="header-anchor">#</a> æ„å»ºRedisé•œåƒå’Œå®¹å™¨</h3> <p>æˆ‘ä»¬è¦æ‰©å±•Sinatraç¨‹åºï¼ŒåŠ å…¥Redisåç«¯æ•°æ®åº“ï¼Œå¹¶åœ¨æ•°æ®åº“ä¸­å­˜å‚¨æ¶®æ¶®çš„å‚æ•°ï¼Œå› æ­¤éœ€è¦åˆ©ç”¨Dockerçš„ç‰¹æ–°æ¥å…³è”ä¸¤ä¸ªå®¹å™¨ã€‚</p> <p><img src="/assets/img/image-20200805172000811.426088a5.png" alt="image-20200805172000811"></p> <p>é¦–å…ˆç”¨Dockerfileæ„å»ºRedisé•œåƒï¼šhttps://gitee.com/canwdev/learn-docker/tree/master/redis</p> <p>å¯åŠ¨å®¹å™¨ï¼š<code>docker run -d -p 6379 --name redis canwdev/redis</code></p> <p>æŸ¥çœ‹æ˜ å°„åˆ°å®¿ä¸»æœºçš„ç«¯å£ï¼Œæ˜¯32772ã€‚</p> <p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAroAAAAlCAMAAACajLqUAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAMAUExURSgqNigqNSIgLCIoNiUpNicmMCcqNx0fLCcpNCcoMiQkLh8mNhofMBgbKiMmNB8kMxQXJh4hMSMjMhcZJhskNSIfJxYeMR0cKF1gZyYiKjIsMzstL2FhYi0oMSklLZ+foRARHyoyRSMnOxwwTSYtP0Q6Oyo4T8zO0XV2ek9BPTVTdiIuR2RLPpDA3TkzNy1IbCQ0WMuaarK0slhYXSssN5qdoTEaKjE+UufOn2mg0ERSYmRnbBg0XR0gPnet1hclSLOCXYK33NLMyMnJyZuZmXJTQldLR1VcZys/YEQ1L920hdytecC9vTtcgliJujckK9GjcUhYaZ7Q4rF8R09/stjl0yseMWI2JL6OYyMmQs6pfePGmnt9gluexkUrJh8lZrLd3FlEOerVqF4kLpHH51NzkZlrSjZIYmNYUkgbKNTNnuW/jktJSqp/WB81cmdBKciSYrLS0R5Bah9FdqLO1L/c5AUDFEgsMy5WhD9okhAWMKzO4N/MsLuKVsPQ2TJCWTYRHGCSw2E3QeLhu9jt5qRrSdDIvVtST3tdSGiQtoqWnxwMG8GXXD5al4xkSuLj1tvSzdm8jpedssbk2gwlVZvA0miXyKp1U6KyxObdySQWIpNcO+Tas8jDt7jI1dTjwsaopbSrna6/yKi/03eKmoyNkJatvNTX2ZaEb7+XcKCorjdKiR8cT36rx1UmJi07fj17sdbVv/X33EBJV7Hc7FMyN5mQfeHQvXdgUwsVQeX39M3fzFRmdcyyjopNRkx5os7g42pkW1Y6LDpooeTty+fu34y+y9PGkqBoNT5BS4lULX5vYbSYenq3zk+Uxb3JxpyXjX5SOhlLhpJ2XW2rzqbY3qHG4OzYwKybnXo4Nkplg3dHMNG8qC5ckXKfv+3o1QYKKUyIvn2bpWGEqot6dkZvqbvg0Gtwdvvzwwo0bGaBlqyEbyJnoT0+c4dqVmF2jZ13WrSlucGggsnx5tLWrZKxzz03YfjSovfkz0svVPbhscHl9Pb/+pfU/Sxwq/fHkCIe1e4AAB3YSURBVHja7VwJWBNX184kM8lMlgkJgRCQAJFF9kVAQDZZFJBNBdmsCoqoFAqCoLiLoGgFcQfBDRX3qnW3LnWrWq1r3deqVWtbra3d2+8/dyYJ0WKlfZ6v/f6WeWiRybn3vPecd84998654XTwJjntV/v1//Bqp2771U7d9qv9+h+kLlepFOOGNwiBDG+jChBtq6BSIGqbKFfXJZ/kinlt6FnE/NcmEIZimFAgfaWoUPAKzXzhy8YRynhoeErpH/cQvzXgcPP3usK4r/iUT6FP4P/i13qPT7Wigm3/371IBuLr/fp71EU4+WxnOQ8eDO1r0BVp36O7Of7iOPmvQAKi3i9ZvVVRMqrrgw6OWBsGh/FzumtxU84BQ91e5wbKppej3L6zHf36rukXxDD+hA6O5IvM1ltB3gWJYlylRPLSgKgJU1/EhETl9u896Oro/Yc9SbUGHG46Uq+2jyagu/crLBHgiP/WaJhQhr38uCFRupX23S3/LCcRHfmvZ65tQHe8LX79PepSzr26W0JzTN6rKfz06SEJLV2pP9/9n2iD54/q2IMRbcWM9K8/93TjGVq9h2Nrohg1auH43X0s2xDMKdtuuW6sWVUjfnl41vQ1xgjav2eR8ejmIaav7zkoafNZhYGij34uoA0QkV062GkNRoVUjb2mwMQ5nfr1y6ReQG0yqcHFcKahQi5kvCUuWjV+99sWvD/qcJPWgKtGfRra91WWwuiigePMW/2U6z6mQMZRFf3yY6RBn6Tm3e59c6ZavDgIp5HjfqvXvTjRF/+T1KVsA4aav7axMOqip7Qtfv096qqKPk4cBqYm1i1eoyo7tHlfy3NOFM3OczN4JlXnBhb4tuoVjBy19qkhYPW5OaGtj56Q5A9sI3WDY7TaCY+7JzNfM4epPYLTE5SjHdpAXdWIo54G4EjN6GXVpOHj9evhfSxl+Kqieam+eJBTYXhs7MltL4RAbvxYQ+ryTc4V5vnyCeWA3n+Kug6tUbfw1dQlqTvDJ8tbT7RyxqTKOERg1UlHA6MRgTfT19/cu/EFbFynxaGtUHee55+mrjrwVO6w145fOAFRtw1+7eANeY/Q2FjC4/DVSuY3BzMxNjYW86n6R0cLJhqJ6bRuPROsrUP8CwQSpURgYiwDSeuSMhxmABOxEokSMx4Vh84wakmgMC7qkFCKkah1GR/dYdUQM859WgGifMxEDCRUyiDZQHpFfIgW7xhSF5IQpbGEC234mAoQyZheEDQaqJtgZCzGAYCx9W2RN4fPFZuwg0ASEimTcBqz0xMpjTu9SIEYYM2o4aDOxDgmZEcDkz0aOIMdk44+fUJBQWYvgTxAxFEbW1ubMjkOQAFJlfHnS67MMEJhmVTsb7ymUL0zJqa/keTqZEuSNRozGuskRF01usEAUMRffwvaUFrqotEgiGAfhJnPUYmFMFKUjrNqWkgPrrAeBdTV+4bDGouhLvxTwdeqgclYJtSOgvJwHWfOw/R+RWpMcUavtcfFVBmlNRprCQkPM5l7c9zcU2smtuTUSNR9TKgpCxFFCRL9QwHUXeML7cVaoyF7a9Xom5ogVwAQti0yr4AZHlk/90LPiUaGoipDiIwasHhHV0/pyxBbp65tr53ffmL1YX+eiccKK5/VFlKSG+fjc2Znvf1nqw7siPA5H72u8Wzc9DOd7qYHPHiyvXP2maG+I1ZYrYw0xymb94ZmW53Z6Rv12aopY0FUF4iptKv3onlExyc7ExhRS5zSqYlasWrK9QifL81tr+70Fto/iaTVHbNBr538ZepSHR88WLnaaeXqUkI0ysrnTCSXj0mcplv5nLfQBMdcnX5mZ18CmkZ8GM3jUHE7r06PuFdKEgoAvz0T+Ea4r5jGRHvCeVJtKW4yOnx1thWowUygj4gv+6b16gSjeXLGpa8qcAXcENIoPt/c2592fu/BitUBK7Zvo52gz0wcAkHXznettrv0dZo+78jSiIhpGA4hZEN6Ah40vzwS6MnlUTJktGlcvioEII35zkXGHTHd6sw0MRPK561ByRZLXT6hGMVCVAd+ZhWxulTOd//w2xVW9w7KdGr4+mUBjCaiqa7a1CQKIK62oDlC58+gsYsSqFsf8iQi0lLAqqGc3xv6xfSIL+HRwIhD30QSeoOLVB0/A5tZgl+Lpkesak4V6IyGqdynW1ltL9U4zV48dvaBS4/1kZiSOflELKzJE5ugtqtLIVAHZftYnYk0QdQNuuqz08KEMZqM1qvRp6pXh2b7RHzoy2fabt8mw90//OEzn+0HnbNnj7x02We1Xgtp64Ta3osWqUKeAERzKQZGi1h7wFMPkYMgQietpQYdLDu+8f1XyxYmL6jPOdp4eXbyyVJ5duFSn+Xl1Qx1L1utjr6T3qv4+gG/qutVW8Id6r46sHfjiBWzd3ta8IT2gy81+ixuuOIBfBx72Qqoi4KCsZgMSjpSIecemhLqO2L6wt2QeBFaNRVRKxZOuW5ldd7ceXCuudJ9a4HAOXutz+zkdDupjrqYED1pUiK/+NbiW6e/OrwId1prNXtxVqQ0KO50o48Vom5drE9Tw1lhx+zZP/m9pcCE/jU71i48XEHY7l++1Of0XkcFR7Xp557RIpSpf1HcRwHz7sjNa2cnr7EQXC1earWw7mlaPDua9I0jNiy9vHbzeQzH5OsKK0zVgUe3xNaEf3VkQYLT9KYjx2iOSdzWS16zD6T3R38vtULUxWQzTy8yVQ9wzT2IYjBF7meMNk1lXxV7GVFX7HQU1IydJsIw2f3GE2jqZalL2WYDxOUfZMo6foYGvsZCtOnWV8tWHXh7YtxIUDMlvVTEWhFnRoOoa6T3jcfNzVZWZxB1KzxuNi6LtNSqEQSeqvvqclN5dV+cXB+c6CbSGXyBb9TN2MuzNz82l8bNWxqxMBmo+2T2TxlgNMod2jLUXdV8fVVzo55UFH806AXqGk84VQl6n22Tr6/aA3qnAXXHpVU1LtuZ4M4aTahTo0tfKJtulyp9ltftk9hvCL88e8/ebdxfa2KXrR2Z+EP2WqDu2u166hLOHzFtQ309wGizwxBEQMRSl/UrNYKB+CrqfrQldOLcwbml/uVnrcs2Ha5239pzmHVgt4yNM5iEQRJ082nV3smnnt19Fl/+5aSH+yYNf0tmPNf1bYa6WZG3R83Jk+gSBtLjEy8vr9UWJiMGxwybuyHjoEJtPKA3S11WzUZrNmGQ23TraQ6rBrBk5+iS23d+jBRrqUsGOa3y8lq20zf/Ym6vMTFffNzHO8elpOTcgVDj/OKY/tZMwnCp2jp/YAFMLLsADlB3Uk2ecu7gnmr3jwtmlDyCxBuncvoxUZcK2lR+hUbUTY++/UaWS2BvwBByIWsyjGb+w33zP0j5qCGl5PZHWZNpIiS+IUWkDuzm18P1ux9ghFyjdz5lqRsTfTu+IdJYnzCoQ+b7gWj+4JiD6PGgnX5KnGgd6Fo77P6SRTNQwhAUnDusZNeF3FJcPTe4dqNIT115VG9PgFjs6dtxqEXJbf/vMhWbjqT33+X/Y8qorXsZNWLGittLZesGjqsvgYRhV3DDNeuypMP7NEnli4yMUMIwZqzXssh6sbNWzbDA4O+fTny0FRYnxLk5FZY48GJLKjL4sE1LTpSUbCqP9BgMfmUThl0wagVG/LrlWEmJEY+aEbjqxKPli9gZGo3GvbfnRJQw7Jp/eNGMskPJFX0PJS9QGqGEYfAlL69p9aYaGD4y2rYQLX02ilqoOw0s0bNv/OFjM6xvzMnz/XxKbUrZncNXZryUMBDOd7asmTi3m99GMFpJya/l+9a7xgzTJgysX4nPd/cpKbndesIAUddvkCKt1/tRron9RcSAj8fN3LOIpoLuLzkhGFHsOYxHrr+5+vmaL4rz9j9LGj7Z32/y/A/eUrBeENq7eopNUDqvLipMRcs00uOzlStXfmgOJBh7ragQ1mMYlf8xS92MjUiNhfDcpwsg0yd01JUp3VfFeo2EOKWlLqbJWbFy5fapqvzi0C+2jgPqqp2rvLwW1+VZHwqrlrDLtJ6WAiadp9bPZ6mbYSeGHsl1X+/w8lo+JX0YT5frElFHE2G6hly3uswEOHVuTh9Lnmjmnup4ZjT+H2wLvhXr5TXm4RVC7j6voC8OUTfx28GJPwx+24LWrGOpO76izGT/DpiXP1/CLNMwuVPxOBDNH9wTUZfUHFqCjJb0TaR/RooCLdMG9K4D+o38cRDNvVHIxiTGaLRICzFmmMQJDfw/jgp4tmSanK7948YPAYg7IsXOT5AVLYKSlpxgkvRHvT3BN7CIhSEyXUGue2DLgnoRpVWTNSjwVMwwBWQN5nTaGx/AIo3Q+TVt/pFGGN6Wfevm9CG4OUBdMJo/UJdDRVVtjl1WLbCvOj1l7OLdO87352kXp4eSj9GwTOszt1vMRgWBYPvnWtDsMq1md8FEBbXeFRlt5MMrOjUWLVE3UQ6x2O+HC7UpCmousApsxtVEdd0mRBgNWAhPV9YgaVrA+2lVCGLTlop3Rvax5Br4FdJ2gOhVLcdfQd2MQZDTKx+59uyvAPOEzpxzjCDAC9cERRAaeNSAo4+b1txfMuRmHqJuVgt1RUDdRIql7jmgqW4VgXJ0VVHx47vfnJXBchdRl0do1YhxNaIuj6GutzLqYmpZXOH1e52eZ7mIyd8kDKlfbH0bqNtlw+Z7nT5pzrPenzxEgJPsDoOA2UQh9NR1FECPmplfn+zXr1+n7pa4dv8Y08CjKNIu1E2AU+fAPLRo5pJ9Our+0G34PWjzfimBnlcFpKBH078d3JOhrghRFwfqLjBlOKWjLtpEuwaWDQluiOTipFCEnA3P6zeT/QGO8g5Q9+O9CMj7FkTIpLFokQY5KENdgPgMfTK17+hPl/brNC8DqNtwhcKEAmWLGsaKTPxQ1N9A1E0E37wzsMJmcEwCTZJA3dOPbyYPUUvzt7JqEhhaUFwZDvZONedxdAZXrg9uWA0iH9oBdS2RwSFxZakLU8d7/TY0VNtcfX745PPNJ4dq6UdqgAK00h1Rt/YgULc41SI4o1QOlkfLtLtT8hKkAy4io8Hw9H7V7/yikNTRP+OHC/AQQ0bliajbF4bHUzMYSUPq+g3CEcT55SxE5H8BxEOdX7UQdzzF8FdFXRQvRfGHh9QHTcpy8RicMUjiXpxoKQx0jdloKl1/9OnNmsamHXvd4nXUlXHBCwkKA+rm9+7ZX2ywW0aE3BxfeTIBTMiFQK6WspZktkiKxniCKGV7wW+jc/CRcWVJW4aUzO32o4uYEAB0lX5HRK2n7hc/Jc4ou3Mrz7iod+5BiZxuoS6p2jV/eIopqaOupXsxTHXWRhBvhXEL8yzQIxJci1yip25It6wrSg/XGBsddQ/e+ebaDGgDk0g3WHkZUlcmBuoKaKBuHuIURN0bc/qoZDRHFTXPk3nIbvyUGy2RPpk8oXftRolToWf9/j1DyrJ/+i4zyP+DQdbW1hJc5d6UqmKCLhhtXIJMDtMbAzFo0sOzJY8ufsdSF22D6amrXYDLnQam1jt9/H11GUzc9SH+fpkacJJAJsch6i5ICy7fx3W+wKrRRzRMmDQ2Us5hoy7azpDvRymMtZHMHmjv4XokVQZGA+qa4oDIyDp/a4G67NA3g5KGp5ThOr1RvRN9o1xv5ZUlTVlQbwopjOx+cqhaJqdVaF6aX1PhGzTpmyug10io96sBddVl6z4dx90PKx3TpPJqrvZx56g7+vulmLZEUCbqoilMdmjPEARR6uxaW+px6ojerwBRZWQ9YGui+e9Rl0/Y3mwOc8jaKRc69Z4VPivdToTJR4+sc3gWPSn0eI+hOWaZTFDJAmenjG5y2H0rbI05S93xoaYkvf/ALIc10XTL7ljc1h+niTHh/sUgWpmqU4Oe6aTmWeGpboqZX8+qbFyeKhnxvCa8sinDRXx3cTOIhpK4IXULvoBpMh4kTofnielRi+vCQY0mOJehrjLnefiULbP2ukjm+2Ui6ppLnS7OCne4Dit71abdsEzD5PA4SA2pK5ngOivModYxhH0QYTQhVQ5h4TAa2bo5x9CD3kLd+PDm3XWVT41bqOvsXxNW+dRSBqGcWZ7ZritsDg8/WcoFoznMSncTeGw44nB9YYaLoMsGUFOZx4RytEhjLQFq5E7zGIiSoqaa8MamXCZhaI26HCLt7pSw616NQ4xtNoBv/CJp2qOqBrVldhg8XGvyLDxYNVwddWEqT0SrUx11OYTt3fEwvHQ7GTL4suUFxk7PHZDRMsWjl8MHzxwJZIr44Smilu3s+yDqtTxUYlt1IMyh4Uuadk5KDnNoHKJEoSFkw5HU/h1vMkZr8WvL66JbYQ5heW5C/C603XGekOqoS8rjxtQ57HVRvERdDqXZDxAdAOK6ObPCljYZ+BVBDH+W2eoyzZvf5U1z9sW7TS8zs+4UTQon9DDrbCdDow4wM5tqnlR70EgigOkXJLU/PTp07mHW3dv2XUeMsnnXDmdFDd8NU7bvoj+pCawoplMDvdogUW88LcCss2MXO4rXpYfZ0OPH3egcJNqhO6nfO3nXzob5IZ17mXV487gdTokmmCE1/AlveqOPKYDcuXOPoW409E7y33XkUDSSQK9OSfsAR2+AMWn4QZqJBgCT6vKmGy4EfR0cZRpoMoEZjRC6h14tnSHvxRm9jvDj/a6dd44ZQuRIM23toS2HsgcojmqP4Nr+OLN9JQNjmdmRpDzHjDGa3B5Ga3Mc1MA/zDp0F0Y9T2deQ+os4a2HqJmABv6mOW7/pjn2AkT9a2kY31Q3GDjXHvlGDisHhBXaIqvIu/TobsmqcQRzv8m8oRUe2lytRqFM71e1M9gb3IhrwOB2XewI+14dOnc2A6Mh6B3spKTWsS3OQ76ZCqK4SssJeIqgk85IjR0mR1UAQoSoQ3dMo/erPupmdDCbaiHlCBn2WEo5YDhMu3MBRmp5R24A0ZaFSGshGviVGZ30FW/TdC+v0cY7U1QDeYmAKb3gU1y4Q+cXp9vZxJ33JgkZLmR+kCQSwYRSJESjxiAqfaGqgYv64gv1orp35KwomkDhl1DKqJOhT3Wi+odfKCW58MPs1YMIrYMGolK0CS9l+mBAo/YMGhJJyGhtrQRGR80rsGRJBjCBaTiHI9QDYn+Y7mEadi8eJ2ff6LN6pXpElL4tIyuVOxX2kekLdASoPgZDSLQIYVQ4KwmicYUVMr15meFhWoj6gbM9s5bUqtGXTAAuIa31jfaOQMZDiPioNoivVQN/MK8ysKALtexbKKzFr1zWRjqD641G6AGBS18oYQARrV4uywm2kQj5BKnU6+W8XPuAEgaVRMbTsQcZQsbTFzEIDMu2MJ1SRhR9Qr4K4p+rHIOFf3Fz8+ZF1J99Afi3XrbH3f6AaFuHaPNHRM3/SsPxu7h5/52OomyC083pv0JTW4oeMdr++PHj5v8/qzpJIf33ilLyv5RJGEH/vSGGb+P21yhqU70uJocL57Rf7VcbLoL+H6Ju+9V+/e9dbaYu+d8vj2+/2q8/Rl0+xpVIxDwOoZQw9f6UQIIuGVpewi/tGxbbAEcMJGX8P6sJE0okLx2eAS0vnF1BCAwfEFhXIxwv/i1hix+VEgEPukCYJQKaOasAo8D5lIkec/v1D6cuRpi6d+r0frS8y3udOnXKJHg26Henrt0tVc7wLxc1846GN2rOAoqyDZhq2SZa8LGXTz9R0ijQYqEwWOlEPQC1LTcwdccHnR4Y7OHx1R0BQKbB6xd7FiJOCp2gswRak/MAbjx43y6NxTzUnNBc7dRpqprX7tl/AXXlNtnzKk+fPChwWhUbO7LWRR4Fv2PH/5zua3t3cePi69MQWSnNRxnb6LaVuTO8TOs11NcwopK007wdi2el6k8JYNSIDTtON6dH66Uoj/k7YsfHZLbccI4PqxyfEcnTcVfozkCMJHCnptjTe/Isgq4uB6wHHlav/+R0bOzp3f8p1WSPjx1fWW3ZHnf/BdQNGp38eCKTMAgkxvlbCyxogURZdiO5wjQpeciMkODcTAUHo6OK+5B0/dwLMWzVGntaAZXmM6ckfrsjFFRVU5GgMMgFPLrl9i+7b1DX6ezvl1J2Y06q7gapudNw1rhoTE8L/av0X/cMqQ90zd1G80kTlFqghMH40VbP/prspyZBb3x/goYUw3iXv5+LjKtUGhcNLCDsP6u2DhzslyJqd+0/nrqEx4aCGUbM0RS10vqdwrwEYKYQEW1ucEaKyORcYzUXJ3n3x7oIbVCZ+5npqx1FlDhuekTEl5a27w3Njjiz0/c33OWr7IOPjLMQ64Muqt+SGI3+Ol0btTH6ncIFQqOirfriDWpAcaq5cWDvH6/ojlqsP5oebRzS7eE+gra5eu8gzhyJsc4vDLXgccWU5n7yMeYt1o05oWoconjaG1lv0RRXRoT4Z11TtLv2n09d93mPP7GK2OmLE+6fWBUmlkpRFdmhmgpxSFXDNetdSYcX+OKUR7cCDDKLtSPrLq/dnikNyt7jZWX1paX94EvhPosbDM/Qaose+Srn+OZ0C1MtqQnnOw0pIVXLa2q18ZDU/LrkhGz/8uax19gbGHFjTkX96IXNdYu01FUXDUydOOq5w60KS67HL1tQZQzhvsKqML0UrdwIzUeHT0BT9dxgP1Qdh1Hn5hSgF358lUc3v7fao+4/n7qadSOvR0Qs37xPLgRerFr2pTmPI49yzS3F5e7zNlutbToC1KVvJC+y5OvPxanfGZiYYG0sZk5JWI9oOd+M4R6frF27bDXM+Xy16brFw1206QDh/MalewsbOz1naMZQd1PdvbWV/arKTyi01P08+fH0ypV3k4/pqHtu4LOV4WeeHOhjSdtk3zuIzibnrIiYvey8Oc2hZDdGxpRCsOWOnhOKagqpNP8sF1S6oFYkHUlNaM91/wXUnfn1OHQ0Jb0/T600CgnOcpGj2b0CElwZEGX13cpqLuV8oXYbzZxGZirr0GEDlAswpyRUgcEtFZu6UxKIQkEzHfY6ErrMNulI2LPMXRcydFEXPzRl1rPIXXcaWqLuyJq91WXouIEu6o6puf6Ui46raHNdlDAY7fJHEOWjtn6XiU7Zhtxkgy6dPzDVErFbs2lKT4v2oPuviLqfHlOoA1FeS5KkyZ2xLnLC5oIfUwIMa7Hbk2ozFVQRe1JXT9348kgZTnKYUnNV4KnclhP8LQlDSHxNqrkuYSCDZk7x9DVGR2N5fKFSjGP0uq9j+ht33FBbykOH3nEOlb/V76BR2qTh23A+pYRlIzXA9cdrRtJN31yjUMkRW+xLYvWbxrrIhEW9v3MxJdEXXQxcg2I+KbxTfo2AXhSHpsREi9sd+y+gLuURnLvRCFb6aporUBYN9LSg6VEHxgFT+ZTQJKSq7rwap+LHZjKH5JkydxmuHjUy0UIio1HUVZbNbO2LWFQ53eoWWOpzYFR4H7NxV3z5IhlHOHrh42ga0ueMFNNDeyrkHK7TqpOOUjLNv+GsctRIUC3M2fDMRYrJ45OH1Of3BkSETdWyt3hMIaVyxJjEaGlRk1+mkUCOEyGTys/KmK02uA15hGbmnJ4WRjK63bP/hn1dp4uXHCofu0muNoWF73m8jaI9XLNS0DZD1IYwh6XTvNHZvQJzNAXrytylmpnjZ4WHh8Iy7Va4Q2We22/2eqmQqvJFKpHhvm7cxUvjK4fAI2Ey6efvMmUY4e5a5+CQB2mxyf7dDyNNOYR98Kyw5tRouBH308MhpugLFJrDxqcfpDlCj18eQk7MjZsHEE9uIzoG//x9bHjYyWGymV97oi0R4P3hswSOyd1/+bkuNrzyaXuy+y+gLoHndO061EJKdXmva9f3LeQ4xyagO0M/m15duzpyeRh1fzPQgrlli2TdcCIooGvXrt3V9q618HfCb6sbSNt333zxlRZFQ9OpCcBmqkuPqeY4TPETzEAvumEfMBV9+YjQvkfXDugVBWUTgM458IXOveAGICJtc1BxPcFClOG2AZ17AICp5nQX9rvkMNuAqeYkLBNtenU2Q9Da30n8C6hLosp0MU9bxY/oRjLnG9jSdSkfItqpGO07L33hO1PFLkW5rlIia+392m++OJCjr5Dna7/glDkswGNvsCcyCfbAAaOG5mgPFoi0jXm6gwa09kiCtoqefW4wFrO2vP6VXzvZfv2jqPs6EUxz3K71rw5FuS7VHt7ar7/l6tyWUxLCV9U7/mUV8e1X+/XS9X9VMhTIF/7F6gAAAABJRU5ErkJggg==" alt="image-20200805172011111"></p> <p>åœ¨å®¿ä¸»æœºå®‰è£…redis-toolsæ¥è°ƒè¯•redisæœåŠ¡å™¨ï¼šapt install -y redis-tools</p> <p>æµ‹è¯•è¿æ¥ï¼šredis-cli -h 127.0.0.1 -p 32772</p> <p><img src="data:image/png;base64,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" alt="image-20200805172016789"></p> <p>è¿æ¥æˆåŠŸã€‚</p> <h3 id="å®¹å™¨çš„ç½‘ç»œæ¥å£"><a href="#å®¹å™¨çš„ç½‘ç»œæ¥å£" class="header-anchor">#</a> å®¹å™¨çš„ç½‘ç»œæ¥å£</h3> <p>Dockerä¼šè‡ªåŠ¨ç»™å®¿ä¸»æœºåˆ›å»ºä¸€ä¸ªæ–°çš„ç½‘ç»œæ¥å£ï¼Œåä¸ºdocker0ï¼Œæ¯ä¸ªDockerå®¹å™¨éƒ½ä¼šåœ¨è¿™ä¸ªæ¥å£ä¸Šåˆ†é…ä¸€ä¸ªIPåœ°å€ï¼Œåœ¨å®¿ä¸»æœºä½¿ç”¨ <code>ip a show docker0</code> æŸ¥çœ‹è¯¥æ¥å£ã€‚</p> <p><img src="/assets/img/image-20200805172027394.2ef1beb4.png" alt="image-20200805172027394"></p> <p>è¦è¿›å…¥å®¹å™¨çš„ç»ˆç«¯å¯ä»¥ä½¿ç”¨ï¼š<code>docker exec -t -i redis /bin/bash</code></p> <p>å¦‚æœå®¹å™¨å†…æ²¡æœ‰ipå’Œifconfigå‘½ä»¤ï¼Œå¯ä»¥å®‰è£…busyboxï¼Œç„¶åç”¨ <code>busybox ip a</code> æ¥æŸ¥çœ‹ç½‘ç»œæ¥å£ã€‚</p> <p>ä¹Ÿå¯ä»¥é€šè¿‡è¿™ç§æ›´ç®€ä¾¿çš„æ–¹æ³•è·å–åˆ°å®¹å™¨çš„IPåœ°å€ï¼š</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>docker inspect -f <span class="token string">'{{ .NetworkSettings.IPAddress }}'</span> redis
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>ç»è¿‡è§‚å¯Ÿï¼Œå®¿ä¸»æœºå’Œå®¹å™¨çš„ç½‘ç»œç»“æ„å›¾å¦‚ä¸‹ï¼š</p> <p><img src="/assets/img/image-20200805172101202.0453297b.png" alt="image-20200805172101202"></p> <p>çŸ¥é“äº†redisçš„ipåœ°å€ï¼Œæˆ‘ä»¬å°±å¯ä»¥åœ¨å®¿ä¸»æœºæˆ–sinatraå®¹å™¨ä¸­ç›´æ¥ç”¨ipåœ°å€æ¥è®¿é—®redisæœåŠ¡äº†ï¼Œä¸è¿‡è¿™é‡Œæœ‰ä¸€ä¸ªå¼Šç«¯ï¼Œé‚£å°±æ˜¯è¿™ä¸ªipåœ°å€æ˜¯ä¼šå˜çš„ï¼ˆå¦‚å®¹å™¨é‡å¯ï¼‰ï¼Œæœ‰æ²¡æœ‰ä»€ä¹ˆå¥½çš„åŠæ³•è§£å†³è¿™ä¸ªé—®é¢˜å‘¢ï¼Ÿè¯·çœ‹ä¸‹èŠ‚ã€‚</p> <h3 id="è®©dockerå®¹å™¨äº’è¿"><a href="#è®©dockerå®¹å™¨äº’è¿" class="header-anchor">#</a> è®©Dockerå®¹å™¨äº’è¿</h3> <p>dockeræä¾›äº†linkå‚æ•°ç”¨äºè®©å®¹å™¨ä¸å®¹å™¨ä¹‹é—´è¿æ¥ã€‚</p> <p>å°†Sinatraå®¹å™¨è¿æ¥åˆ°Rediså®¹å™¨ï¼š</p> <p>é¦–å…ˆï¼Œåˆ é™¤ä¹‹å‰åˆ›å»ºçš„å®¹å™¨ï¼Œå› ä¸ºæˆ‘ä»¬è¦é‡æ–°åˆ›å»ºï¼š</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>docker stop redis sinatra_app
docker rm redis sinatra_app
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>æ–°å»ºrediså®¹å™¨ï¼ˆè¿™é‡Œæˆ‘ä»¬æ²¡æœ‰ç»™å®¿ä¸»æœºå…¬å¼€ç«¯å£ï¼‰ï¼š</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>docker run -d --name redis canwdev/redis
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>cdåˆ°Sinatraé¡¹ç›®ï¼Œæ–°å»ºSinatraå®¹å™¨ï¼ˆè¿æ¥åˆ°Rediså®¹å™¨ï¼‰ï¼š</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>cd sinatra/webapp/
docker run -p 4567 \
--name sinatra_app --link redis:db -t -i \
-v $PWD:/opt/webapp canwdev/sinatra \
/bin/bash
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>è¿™é‡Œç”¨åˆ°äº† --link æ ‡å¿—ï¼Œå®ƒåˆ›å»ºäº†ä¸¤ä¸ªå®¹å™¨é—´çš„çˆ¶å­è¿æ¥ï¼Œéœ€è¦ä¸¤ä¸ªå‚æ•°ï¼Œä¸€ä¸ªæ˜¯è¦è¿æ¥çš„å®¹å™¨åå­—ï¼Œç¬¬äºŒä¸ªæ˜¯è¿æ¥åçš„å®¹å™¨åˆ«åï¼Œç”¨å†’å·éš”å¼€ã€‚è¿™ä¸ªåˆ«åä¼šè¢«æ”¾åˆ°hostsæ–‡ä»¶ä¸­ï¼š</p> <p><img src="data:image/png;base64,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" alt="image-20200805172144190"></p> <p>å¦å¤–ï¼Œç¯å¢ƒå˜é‡ä¸­ä¹Ÿä¼šæœ‰ä¸€äº›ç›¸å…³å†…å®¹ï¼š</p> <p><img src="/assets/img/image-20200805172151671.cc9e42e4.png" alt="image-20200805172151671"></p> <div class="custom-block tip"><p class="custom-block-title">æç¤º</p> <p><strong>æç¤º</strong>ï¼šå¦‚æœæƒ³è¦è®©å®¹å™¨å†…çš„ç½‘ç»œç«¯å£å’Œå®¿ä¸»æœºçš„ä¿æŒä¸€è‡´ï¼Œä½¿ç”¨ --net=host å‚æ•°ï¼Œè®©Dockerå®¹å™¨å’Œå®¿ä¸»æœºåœ¨åŒä¸€ä¸ªç½‘ç»œä¸­ï¼Œè¿™é€‚ç”¨äºfrpã€nginxç­‰æœåŠ¡ã€‚</p></div> <h3 id="æ­å»º-droneci"><a href="#æ­å»º-droneci" class="header-anchor">#</a> æ­å»º DroneCI</h3> <p>å¦‚æœä¹‹å‰å®‰è£…äº†Giteaï¼Œåˆ™åªéœ€è¦å‚ç…§è¿™ä¸ªè„šæœ¬å°±å¯ä»¥æ­å»ºå¥½Drone CIï¼Œå…·ä½“è¿˜è¯·é˜…è¯»å®˜æ–¹æ–‡æ¡£ã€‚</p> <blockquote><p>è¿è¡Œä¸‹é¢ä»£ç å‰ï¼Œéœ€è¦æŠŠæ³¨é‡Šï¼ˆ#ï¼‰å»æ‰ã€‚</p></blockquote> <div class="language- line-numbers-mode"><pre class="language-text"><code>docker rm -f drone
docker run \
  # è¿™ä¸€è¡Œå¯ä»¥ä¸éœ€è¦ï¼Œé™¤éä½ æ²¡æœ‰å›ºå®šçš„GiteaåŸŸå
  --link gitea:gitea_host  \
  # æŒ‚è½½å­˜å‚¨Droneçš„é…ç½®æ–‡ä»¶å¤¹ï¼ˆå½“å‰æ–‡ä»¶å¤¹çš„dataç›®å½•ï¼‰
  --volume=$PWD/data :/data \
  # æˆ‘çš„GiteaåŸŸåå¯ç”¨äº†SSLè¯ä¹¦ï¼Œä½†è¯ä¹¦ä¸è¢«Droneè®¤å¯ï¼Œæ‰€ä»¥éœ€è¦æ‰‹åŠ¨æŒ‚è½½è¯ä¹¦æ–‡ä»¶
  --volume=$PWD/certificate.crt :/etc/ssl/certs/ca-certificates.crt:ro \
  # åŒæ ·çš„ï¼Œåœ¨Droneä¸­æŒ‡å®šè¯ä¹¦æ–‡ä»¶
  --env=DRONE_RUNNER_VOLUMES=$PWD/certificate.crt :/etc/ssl/certs/ca-certificates.crt \
  # Gitea æœåŠ¡å™¨ç½‘å€
  --env=DRONE_GITEA_SERVER=https://xxx.top:9005  \
  --env=DRONE_GITEA_CLIENT_ID=Giteaå®¢æˆ·ç«¯ID \
  --env=DRONE_GITEA_CLIENT_SECRET=Giteaå®¢æˆ·ç«¯å¯†é’¥ \
  --env=DRONE_RPC_SECRET=å‚è€ƒæ–‡æ¡£ç”Ÿæˆçš„å¯†é’¥ \
  # Drone åŸŸåï¼ˆå’Œç«¯å£å·ï¼‰ï¼Œä¸è¦æ·»åŠ  https ç­‰åè®®å
  --env=DRONE_SERVER_HOST=xxx.top:9004  \
  # ä½¿ç”¨httpåè®®
  --env=DRONE_SERVER_PROTO=http  \
  # Drone æ˜ å°„åˆ°å®¿ä¸»æœºçš„httpç«¯å£
  --publish=9004 :80 \
  --restart=always \
  --detach=true \
  --name=drone \
  drone/drone:1
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br></div></div><h2 id="ä½¿ç”¨dockeræ„å»ºæœåŠ¡"><a href="#ä½¿ç”¨dockeræ„å»ºæœåŠ¡" class="header-anchor">#</a> ä½¿ç”¨Dockeræ„å»ºæœåŠ¡</h2> <h3 id="æ„å»ºjekyllåº”ç”¨"><a href="#æ„å»ºjekyllåº”ç”¨" class="header-anchor">#</a> æ„å»ºJekyllåº”ç”¨</h3> <h4 id="jekyllåŸºç¡€é•œåƒ"><a href="#jekyllåŸºç¡€é•œåƒ" class="header-anchor">#</a> JekyllåŸºç¡€é•œåƒ</h4> <div class="language- line-numbers-mode"><pre class="language-text"><code>FROM ubuntu:18.04
LABEL maintainer=&quot;canwdev&quot;
ENV REFRESHED_AT 2020-07-27

RUN sed -i &quot;s@http://.*archive.ubuntu.com@http://mirrors.huaweicloud.com@g&quot; /etc/apt/sources.list
RUN sed -i &quot;s@http://.*security.ubuntu.com@http://mirrors.huaweicloud.com@g&quot; /etc/apt/sources.list
RUN apt update
RUN apt -y -q install ruby-full make gcc g++ nodejs
RUN ruby -v
RUN gem sources --add https://gems.ruby-china.com/ --remove https://rubygems.org/
RUN gem install jekyll

VOLUME [ &quot;/data&quot;, &quot;/var/www/html&quot; ]

WORKDIR /data

ENTRYPOINT [ &quot;jekyll&quot;, &quot;build&quot;, &quot;--destination=/var/www/html&quot; ]
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><p><code>/data</code> ç”¨æ¥å­˜æ”¾ç½‘ç«™çš„æºä»£ç </p> <p><code>/var/www/html</code> ç”¨æ¥å­˜æ”¾ç¼–è¯‘åçš„Jekyllç½‘ç«™ç </p> <p>æ„å»ºJekyllé•œåƒï¼š<code>docker build -t canwdev/jekyll .</code></p> <p>åœ¨è¿™ä¸ªDockerfileé‡Œï¼Œæˆ‘ä»¬ä½¿ç”¨VOLUMEå‘½ä»¤åˆ›å»ºäº†ä¸¤ä¸ªå·ã€‚</p> <h4 id="apacheé•œåƒ"><a href="#apacheé•œåƒ" class="header-anchor">#</a> Apacheé•œåƒ</h4> <div class="language- line-numbers-mode"><pre class="language-text"><code>FROM ubuntu:18.04
LABEL maintainer=&quot;canwdev&quot;
ENV REFRESHED_AT 2020-08-03

RUN sed -i &quot;s@http://.*archive.ubuntu.com@http://mirrors.huaweicloud.com@g&quot; /etc/apt/sources.list
RUN sed -i &quot;s@http://.*security.ubuntu.com@http://mirrors.huaweicloud.com@g&quot; /etc/apt/sources.list
RUN apt update
RUN apt -y -q install apache2

VOLUME [ &quot;/var/www/html&quot; ]
WORKDIR /var/www/html

ENV APACHE_RUN_USER www-data
ENV APACHE_RUN_GROUP www-data
ENV APACHE_LOG_DIR /var/log/apache2
ENV APACHE_RUN_DIR /var/run/apache2
ENV APACHE_LOCK_DIR /var/lock/apache2

RUN mkdir -p ${APACHE_RUN_DIR} ${APACHE_LOCK_DIR} ${APACHE_LOG_DIR}

EXPOSE 80

ENTRYPOINT [ &quot;/usr/sbin/apache2&quot; ]
CMD [&quot;-D&quot;, &quot;FOREGROUND&quot;]
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br></div></div><p>æ„å»ºApacheé•œåƒ: <code>docker build -t canwdev/apache .</code></p> <h4 id="å¯åŠ¨jekyllç½‘ç«™"><a href="#å¯åŠ¨jekyllç½‘ç«™" class="header-anchor">#</a> å¯åŠ¨Jekyllç½‘ç«™</h4> <p>ç°åœ¨æˆ‘ä»¬æœ‰äº†Jekyllå’ŒApacheé•œåƒï¼Œå¯ä»¥å¯åŠ¨äº†ï¼Œä¸è¿‡åœ¨æ­¤ä¹‹å‰è¿˜è¦å…ˆåˆ°è¿™é‡Œhttps://github.com/turnbullpress/james_blog.git è·å–ä½œè€…çš„ç¤ºä¾‹æºç ã€‚</p> <p>ä½¿ç”¨Jekyllç¼–è¯‘james_blogæºç ï¼š</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>docker run --name james_blog \
-v $PWD/james_blog:/data/ \
canwdev/jekyll
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>æŸ¥çœ‹å·çš„ä½ç½®ï¼š</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>docker inspect -f <span class="token string">&quot;{{range.Mounts}}{{.}}{{end}}&quot;</span> james_blog
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>ä¸Šé¢çš„Dockerå‘½ä»¤å¹¶ä¸ä¼šå¸®æˆ‘ä»¬å¯åŠ¨Jekyllç½‘ç«™ï¼Œè€Œä»…ä»…æ˜¯ç¼–è¯‘ç½‘ç«™æºä»£ç ï¼ˆç”Ÿæˆé™æ€HTMLï¼‰ï¼Œè¦å¯åŠ¨ç½‘ç«™ï¼Œåˆ™éœ€è¦ä½¿ç”¨Apacheï¼š</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>docker run -d -P --volumes-from james_blog --name james_blog_apache canwdev/apache
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>å…¶ä¸­<code>--volumes-from</code>æŠŠæŒ‡å®šå®¹å™¨é‡Œçš„æ‰€æœ‰å·éƒ½åŠ å…¥æ–°åˆ›å»ºçš„å®¹å™¨é‡Œï¼Œè¿™æ„å‘³ç€Apacheå®¹å™¨å¯ä»¥è®¿é—®james_blogå®¹å™¨é‡Œé¢çš„<code>/var/www/html</code>å·ä¸­å­˜æ”¾çš„ç¼–è¯‘è¿‡åçš„HTMLæ–‡ä»¶ã€‚</p> <p>åœ¨Apacheå®¹å™¨è¿è¡Œèµ·æ¥ä¹‹åï¼Œä½¿ç”¨ <code>docker port james_blog_apache 80</code> æŸ¥çœ‹æ˜ å°„åˆ°æœ¬åœ°çš„ç«¯å£ï¼Œç„¶ååœ¨æµè§ˆå™¨ä¸­æ‰“å¼€ï¼š</p> <p><img src="/assets/img/image-20200805173036376.f1301521.png" alt="image-20200805173036376"></p> <p>é™¤äº†ä¸€äº›åº“404äº†ï¼Œç½‘ç«™å¯ä»¥æ­£å¸¸çš„è¿è¡Œï¼</p> <h2 id="é™„å½•"><a href="#é™„å½•" class="header-anchor">#</a> é™„å½•</h2> <h3 id="é•œåƒçš„å¯¼å‡ºå’Œå¯¼å…¥"><a href="#é•œåƒçš„å¯¼å‡ºå’Œå¯¼å…¥" class="header-anchor">#</a> é•œåƒçš„å¯¼å‡ºå’Œå¯¼å…¥</h3> <ol><li><p>åœ¨å¤–ç½‘ç¯å¢ƒä¸‹ä½¿ç”¨ docker pull å‘½ä»¤ä¸‹è½½ç›¸åº”çš„é•œåƒï¼Œä½¿ç”¨docker images åˆ—å‡ºæ‰€æœ‰é•œåƒï¼š</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>docker images
REPOSITORY          TAG                 IMAGE ID            CREATED             SIZE
ubuntu              latest              74435f89ab78        2 weeks ago         73.9MB
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div></li> <li><p>ä½¿ç”¨docker saveå‘½ä»¤å¯¹é•œåƒè¿›è¡Œæ‰“åŒ…ï¼š</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>docker save -o ubuntu.tar ubuntu
ls -lah
total 73M
drwxr-xr-x 2 root root 4.0K Jul  1 10:43 .
drwxr-xr-x 5 mint mint 4.0K Jul  1 10:43 ..
-rw------- 1 root root  73M Jul  1 10:43 ubuntu.tar
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div></li> <li><p>å°†æ‰“åŒ…å¥½çš„é•œåƒä¼ é€è‡³å†…ç½‘ç¦»çº¿ç¯å¢ƒçš„æœºå™¨ï¼Œä½¿ç”¨docker load å‘½ä»¤å°†é•œåƒåŠ è½½</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>docker load -i ubuntu.tar
Loaded image: ubuntu:latest
root@mint-MacBookAir:/home/mint/Code/docker-test# docker images
REPOSITORY          TAG                 IMAGE ID            CREATED             SIZE
ubuntu              latest              74435f89ab78        2 weeks ago         73.9MB
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div></li> <li><p>ç°åœ¨ä½¿ç”¨docker images å°±å¯ä»¥æŸ¥å‡ºåˆšæ‰åŠ è½½çš„é•œåƒäº†ã€‚</p></li></ol> <hr> <p>å¯¼å‡ºå’Œå¯¼å…¥é•œåƒçš„å¦ä¸€ç§å†™æ³•ï¼š</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>docker save imageID &gt; filename.tar
docker load &lt; filename.tar
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>ä¿å­˜ä¸ºå‹ç¼©ï¼š</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>docker save myimage:latest | gzip &gt; myimage_latest.tar.gz
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="æ‰¹é‡å¯¼å‡º-å¯¼å…¥é•œåƒ"><a href="#æ‰¹é‡å¯¼å‡º-å¯¼å…¥é•œåƒ" class="header-anchor">#</a> æ‰¹é‡å¯¼å‡º/å¯¼å…¥é•œåƒ</h3> <p>å‚è€ƒï¼š<a href="https://stackoverflow.com/a/37650072" target="_blank" rel="noopener noreferrer">How to save all Docker images and copy to another machine<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>ä¸€æ¬¡æ€§å¯¼å‡ºæ‰€æœ‰é•œåƒä¸ºä¸€ä¸ªå¤§å‹ tarï¼š</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>docker save <span class="token variable"><span class="token variable">$(</span>docker images -q<span class="token variable">)</span></span> -o /path/to/save/mydockersimages.tar
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>ä¿å­˜ tag åˆ—è¡¨ï¼š</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>docker images <span class="token operator">|</span> <span class="token function">sed</span> <span class="token string">'1d'</span> <span class="token operator">|</span> <span class="token function">awk</span> <span class="token string">'{print $1 &quot; &quot; $2 &quot; &quot; $3}'</span> <span class="token operator">&gt;</span> mydockersimages.list
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>åœ¨å¦ä¸€å°æœºå™¨ä¸Šå¯¼å…¥ï¼š</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>docker load -i /path/to/save/mydockersimages.tar
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>ä¸ºå¯¼å…¥çš„é•œåƒæ‰“ä¸Š tagï¼š</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token keyword">while</span> <span class="token builtin class-name">read</span> REPOSITORY TAG IMAGE_ID
<span class="token keyword">do</span>
        <span class="token builtin class-name">echo</span> <span class="token string">&quot;== Tagging <span class="token variable">$REPOSITORY</span> <span class="token variable">$TAG</span> <span class="token variable">$IMAGE_ID</span> ==&quot;</span>
        docker tag <span class="token string">&quot;<span class="token variable">$IMAGE_ID</span>&quot;</span> <span class="token string">&quot;<span class="token variable">$REPOSITORY</span>:<span class="token variable">$TAG</span>&quot;</span>
<span class="token keyword">done</span> <span class="token operator">&lt;</span> mydockersimages.list
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="å®¹å™¨çš„å¯¼å‡ºå’Œå¯¼å…¥"><a href="#å®¹å™¨çš„å¯¼å‡ºå’Œå¯¼å…¥" class="header-anchor">#</a> å®¹å™¨çš„å¯¼å‡ºå’Œå¯¼å…¥</h3> <div class="language- line-numbers-mode"><pre class="language-text"><code>docker export containID &gt; filename.tar
docker import filename.tar [newname]
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="ä½¿ç”¨é˜¿é‡Œäº‘å®¹å™¨é•œåƒæœåŠ¡"><a href="#ä½¿ç”¨é˜¿é‡Œäº‘å®¹å™¨é•œåƒæœåŠ¡" class="header-anchor">#</a> ä½¿ç”¨é˜¿é‡Œäº‘å®¹å™¨é•œåƒæœåŠ¡</h3> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>docker login --username<span class="token operator">=</span><span class="token operator">&lt;</span>ç”¨æˆ·å<span class="token operator">&gt;</span> registry.cn-hangzhou.aliyuncs.com
<span class="token comment"># å‘å¸ƒé•œåƒ</span>
docker image tag <span class="token operator">&lt;</span>é•œåƒå<span class="token operator">&gt;</span>:latest registry.cn-hangzhou.aliyuncs.com/<span class="token operator">&lt;</span>å‘½åç©ºé—´<span class="token operator">&gt;</span>/<span class="token operator">&lt;</span>é•œåƒå<span class="token operator">&gt;</span>:latest
docker image push registry.cn-hangzhou.aliyuncs.com/<span class="token operator">&lt;</span>å‘½åç©ºé—´<span class="token operator">&gt;</span>/<span class="token operator">&lt;</span>é•œåƒå<span class="token operator">&gt;</span>:latest
<span class="token comment"># æ‹‰å–é•œåƒ</span>
docker pull registry.cn-hangzhou.aliyuncs.com/<span class="token operator">&lt;</span>å‘½åç©ºé—´<span class="token operator">&gt;</span>/<span class="token operator">&lt;</span>é•œåƒå<span class="token operator">&gt;</span>:latest
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div></div></div>  <div class="page-edit"><div class="edit-link"><a href="https://github.com/canwdev/notes-vuepress/edit/master/docs/notes/docker.md" target="_blank" rel="noopener noreferrer">ç¼–è¾‘</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <!----> <div class="last-updated"><span class="prefix">ä¸Šæ¬¡æ›´æ–°:</span> <span class="time">2021/07/24, 03:42:43</span></div></div> <div class="page-nav-wapper"><!----> <!----></div></div> <div class="article-list"><div class="article-title"><a href="/archives/" class="iconfont icon-bi">æœ€è¿‘æ›´æ–°</a></div> <div class="article-wrapper"><dl><dd>01</dd> <dt><a href="/pages/b5bb8c/"><div>Linux</div></a> <span>07-24</span></dt></dl><dl><dd>02</dd> <dt><a href="/pages/fd87b7/"><div>å‘½ä»¤è¡Œå®‰è£… ArchLinux è®°å½•</div></a> <span>06-20</span></dt></dl><dl><dd>03</dd> <dt><a href="/pages/713951/"><div>Linux Deploy ä½¿ç”¨æ•™ç¨‹</div></a> <span>06-20</span></dt></dl> <dl><dd></dd> <dt><a href="/archives/" class="more">æ›´å¤šæ–‡ç« &gt;</a></dt></dl></div></div></main></div> <div class="footer"><div class="icons"><a href="#" title="å‘é‚®ä»¶" target="_blank" class="iconfont icon-youjian"></a><a href="https://github.com/canwdev" title="GitHub" target="_blank" class="iconfont icon-github"></a><a href="#" title="å¬éŸ³ä¹" target="_blank" class="iconfont icon-erji"></a></div> 
  Theme by
  <a href="https://github.com/xugaoyi/vuepress-theme-vdoing" target="_blank" title="æœ¬ç«™ä¸»é¢˜">Vdoing</a> 
    | Copyright Â© 2018-2021
    <span>canwdev | ğŸ”¨ Powered by VuePress</span></div> <div class="buttons"><div title="è¿”å›é¡¶éƒ¨" class="button blur go-to-top iconfont icon-fanhuidingbu" style="display:none;"></div> <div title="å»è¯„è®º" class="button blur go-to-comment iconfont icon-pinglun" style="display:none;"></div> <div title="ä¸»é¢˜æ¨¡å¼" class="button blur theme-mode-but iconfont icon-zhuti"><ul class="select-box" style="display:none;"><li class="iconfont icon-zidong">
          è·Ÿéšç³»ç»Ÿ
        </li><li class="iconfont icon-rijianmoshi">
          æµ…è‰²æ¨¡å¼
        </li><li class="iconfont icon-yejianmoshi">
          æ·±è‰²æ¨¡å¼
        </li><li class="iconfont icon-yuedu">
          é˜…è¯»æ¨¡å¼
        </li></ul></div></div> <!----> <!----> <!----></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.6402e89f.js" defer></script><script src="/assets/js/2.ea95b221.js" defer></script><script src="/assets/js/3.d80f252a.js" defer></script><script src="/assets/js/12.e0813766.js" defer></script>
  </body>
</html>